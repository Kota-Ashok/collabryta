{"ast":null,"code":"import api from './api';\nexport const taskService = {\n  getTasks: async filters => {\n    const response = await api.get('/tasks/');\n    const tasks = response.data;\n\n    // Map backend response to frontend requirements\n    return tasks.map(t => ({\n      ...t,\n      assigned_to_user: t.assignee,\n      // Map assignee to assigned_to_user\n      is_overdue: t.due_date ? new Date(t.due_date) < new Date() && t.status !== 'Completed' : false\n    })).filter(t => !(filters !== null && filters !== void 0 && filters.status) || t.status === filters.status);\n  },\n  getStats: async () => {\n    // Mock stats for now\n    return {\n      total: 10,\n      completed: 5,\n      pending: 3,\n      overdue: 2\n    };\n  },\n  createTask: async task => {\n    // Map frontend assigned_to to backend assignee_id\n    const payload = {\n      ...task,\n      assignee_id: task.assigned_to || task.assignee_id\n    };\n    const response = await api.post('/tasks/', payload);\n    return response.data;\n  },\n  updateTask: async (id, task) => {\n    const payload = {\n      ...task,\n      assignee_id: task.assigned_to !== undefined ? task.assigned_to : task.assignee_id\n    };\n    const response = await api.put(`/tasks/${id}`, payload);\n    return response.data;\n  },\n  deleteTask: async id => {\n    const response = await api.delete(`/tasks/${id}`);\n    return response.data;\n  },\n  getTaskById: async id => {\n    const response = await api.get(`/tasks/${id}`);\n    const task = response.data;\n    return {\n      ...task,\n      assigned_to_user: task.assignee,\n      is_overdue: task.due_date ? new Date(task.due_date) < new Date() && task.status !== 'Completed' : false\n    };\n  }\n};","map":{"version":3,"names":["api","taskService","getTasks","filters","response","get","tasks","data","map","t","assigned_to_user","assignee","is_overdue","due_date","Date","status","filter","getStats","total","completed","pending","overdue","createTask","task","payload","assignee_id","assigned_to","post","updateTask","id","undefined","put","deleteTask","delete","getTaskById"],"sources":["D:/Collabryta/collabryta-frontend/src/services/taskService.ts"],"sourcesContent":["import api from './api';\r\nimport { User } from './userService';\r\n\r\nexport interface Task {\r\n    id: number;\r\n    title: string;\r\n    description?: string;\r\n    status: string;\r\n    priority: string;\r\n    due_date?: string;\r\n    owner_id: number;\r\n    assignee_id?: number;\r\n    owner?: User;\r\n    assignee?: User;\r\n    // Mapped properties for frontend compatibility\r\n    assigned_to_user?: User;\r\n    is_overdue?: boolean;\r\n    created_at?: string; // ISO string from backend\r\n}\r\n\r\nexport const taskService = {\r\n    getTasks: async (filters?: { status?: string }): Promise<Task[]> => {\r\n        const response = await api.get('/tasks/');\r\n        const tasks: Task[] = response.data;\r\n\r\n        // Map backend response to frontend requirements\r\n        return tasks.map(t => ({\r\n            ...t,\r\n            assigned_to_user: t.assignee, // Map assignee to assigned_to_user\r\n            is_overdue: t.due_date ? new Date(t.due_date) < new Date() && t.status !== 'Completed' : false\r\n        })).filter(t => !filters?.status || t.status === filters.status);\r\n    },\r\n\r\n    getStats: async () => {\r\n        // Mock stats for now\r\n        return {\r\n            total: 10,\r\n            completed: 5,\r\n            pending: 3,\r\n            overdue: 2\r\n        };\r\n    },\r\n\r\n    createTask: async (task: { title: string; description?: string; status?: string; priority?: string; due_date?: string; assigned_to?: number; assignee_id?: number }) => {\r\n        // Map frontend assigned_to to backend assignee_id\r\n        const payload = {\r\n            ...task,\r\n            assignee_id: task.assigned_to || task.assignee_id\r\n        };\r\n        const response = await api.post('/tasks/', payload);\r\n        return response.data;\r\n    },\r\n\r\n    updateTask: async (id: number, task: Partial<Task> & { assigned_to?: number; assignee_id?: number }) => {\r\n        const payload = {\r\n            ...task,\r\n            assignee_id: task.assigned_to !== undefined ? task.assigned_to : task.assignee_id\r\n        };\r\n        const response = await api.put(`/tasks/${id}`, payload);\r\n        return response.data;\r\n    },\r\n\r\n    deleteTask: async (id: number) => {\r\n        const response = await api.delete(`/tasks/${id}`);\r\n        return response.data;\r\n    },\r\n\r\n    getTaskById: async (id: number): Promise<Task> => {\r\n        const response = await api.get(`/tasks/${id}`);\r\n        const task = response.data;\r\n        return {\r\n            ...task,\r\n            assigned_to_user: task.assignee,\r\n            is_overdue: task.due_date ? new Date(task.due_date) < new Date() && task.status !== 'Completed' : false\r\n        };\r\n    }\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AAoBvB,OAAO,MAAMC,WAAW,GAAG;EACvBC,QAAQ,EAAE,MAAOC,OAA6B,IAAsB;IAChE,MAAMC,QAAQ,GAAG,MAAMJ,GAAG,CAACK,GAAG,CAAC,SAAS,CAAC;IACzC,MAAMC,KAAa,GAAGF,QAAQ,CAACG,IAAI;;IAEnC;IACA,OAAOD,KAAK,CAACE,GAAG,CAACC,CAAC,KAAK;MACnB,GAAGA,CAAC;MACJC,gBAAgB,EAAED,CAAC,CAACE,QAAQ;MAAE;MAC9BC,UAAU,EAAEH,CAAC,CAACI,QAAQ,GAAG,IAAIC,IAAI,CAACL,CAAC,CAACI,QAAQ,CAAC,GAAG,IAAIC,IAAI,CAAC,CAAC,IAAIL,CAAC,CAACM,MAAM,KAAK,WAAW,GAAG;IAC7F,CAAC,CAAC,CAAC,CAACC,MAAM,CAACP,CAAC,IAAI,EAACN,OAAO,aAAPA,OAAO,eAAPA,OAAO,CAAEY,MAAM,KAAIN,CAAC,CAACM,MAAM,KAAKZ,OAAO,CAACY,MAAM,CAAC;EACpE,CAAC;EAEDE,QAAQ,EAAE,MAAAA,CAAA,KAAY;IAClB;IACA,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,CAAC;MACZC,OAAO,EAAE,CAAC;MACVC,OAAO,EAAE;IACb,CAAC;EACL,CAAC;EAEDC,UAAU,EAAE,MAAOC,IAAgJ,IAAK;IACpK;IACA,MAAMC,OAAO,GAAG;MACZ,GAAGD,IAAI;MACPE,WAAW,EAAEF,IAAI,CAACG,WAAW,IAAIH,IAAI,CAACE;IAC1C,CAAC;IACD,MAAMrB,QAAQ,GAAG,MAAMJ,GAAG,CAAC2B,IAAI,CAAC,SAAS,EAAEH,OAAO,CAAC;IACnD,OAAOpB,QAAQ,CAACG,IAAI;EACxB,CAAC;EAEDqB,UAAU,EAAE,MAAAA,CAAOC,EAAU,EAAEN,IAAoE,KAAK;IACpG,MAAMC,OAAO,GAAG;MACZ,GAAGD,IAAI;MACPE,WAAW,EAAEF,IAAI,CAACG,WAAW,KAAKI,SAAS,GAAGP,IAAI,CAACG,WAAW,GAAGH,IAAI,CAACE;IAC1E,CAAC;IACD,MAAMrB,QAAQ,GAAG,MAAMJ,GAAG,CAAC+B,GAAG,CAAC,UAAUF,EAAE,EAAE,EAAEL,OAAO,CAAC;IACvD,OAAOpB,QAAQ,CAACG,IAAI;EACxB,CAAC;EAEDyB,UAAU,EAAE,MAAOH,EAAU,IAAK;IAC9B,MAAMzB,QAAQ,GAAG,MAAMJ,GAAG,CAACiC,MAAM,CAAC,UAAUJ,EAAE,EAAE,CAAC;IACjD,OAAOzB,QAAQ,CAACG,IAAI;EACxB,CAAC;EAED2B,WAAW,EAAE,MAAOL,EAAU,IAAoB;IAC9C,MAAMzB,QAAQ,GAAG,MAAMJ,GAAG,CAACK,GAAG,CAAC,UAAUwB,EAAE,EAAE,CAAC;IAC9C,MAAMN,IAAI,GAAGnB,QAAQ,CAACG,IAAI;IAC1B,OAAO;MACH,GAAGgB,IAAI;MACPb,gBAAgB,EAAEa,IAAI,CAACZ,QAAQ;MAC/BC,UAAU,EAAEW,IAAI,CAACV,QAAQ,GAAG,IAAIC,IAAI,CAACS,IAAI,CAACV,QAAQ,CAAC,GAAG,IAAIC,IAAI,CAAC,CAAC,IAAIS,IAAI,CAACR,MAAM,KAAK,WAAW,GAAG;IACtG,CAAC;EACL;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}