{"ast":null,"code":"import api from './api';\nexport const authService = {\n  login: async (email, password) => {\n    const params = new URLSearchParams();\n    params.append('username', email);\n    params.append('password', password);\n\n    // OAuth2PasswordRequestForm expects form data\n    const response = await api.post('/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    });\n    if (response.data.access_token) {\n      localStorage.setItem('token', response.data.access_token);\n    }\n    return response.data;\n  },\n  register: async userData => {\n    const {\n      name,\n      email,\n      password\n    } = userData;\n    const response = await api.post('/users/', {\n      email,\n      password,\n      name\n    });\n    return response.data;\n  },\n  logout: () => {\n    localStorage.removeItem('token');\n  },\n  getCurrentUser: async () => {\n    const response = await api.get('/users/me');\n    return response.data;\n  },\n  isAuthenticated: () => {\n    const token = localStorage.getItem('token');\n    if (!token) return false;\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      const isExpired = payload.exp * 1000 < Date.now();\n      if (isExpired) {\n        localStorage.removeItem('token');\n        return false;\n      }\n      return true;\n    } catch (e) {\n      return false;\n    }\n  },\n  updateProfile: async profileData => {\n    const response = await api.put('/users/me', profileData);\n    return response.data;\n  }\n};","map":{"version":3,"names":["api","authService","login","email","password","params","URLSearchParams","append","response","post","headers","data","access_token","localStorage","setItem","register","userData","name","logout","removeItem","getCurrentUser","get","isAuthenticated","token","getItem","payload","JSON","parse","atob","split","isExpired","exp","Date","now","e","updateProfile","profileData","put"],"sources":["D:/Collabryta/collabryta-frontend/src/services/authService.ts"],"sourcesContent":["import api from './api';\r\n\r\nexport interface User {\r\n    id: number;\r\n    email: string;\r\n    name?: string;\r\n    role?: string;\r\n    avatar?: string;\r\n}\r\n\r\nexport const authService = {\r\n    login: async (email: string, password: string) => {\r\n        const params = new URLSearchParams();\r\n        params.append('username', email);\r\n        params.append('password', password);\r\n\r\n        // OAuth2PasswordRequestForm expects form data\r\n        const response = await api.post('/auth/login', params, {\r\n            headers: {\r\n                'Content-Type': 'application/x-www-form-urlencoded',\r\n            },\r\n        });\r\n        if (response.data.access_token) {\r\n            localStorage.setItem('token', response.data.access_token);\r\n        }\r\n        return response.data;\r\n    },\r\n\r\n    register: async (userData: any) => {\r\n        const { name, email, password } = userData;\r\n        const response = await api.post('/users/', {\r\n            email,\r\n            password,\r\n            name,\r\n        });\r\n        return response.data;\r\n    },\r\n\r\n    logout: () => {\r\n        localStorage.removeItem('token');\r\n    },\r\n\r\n    getCurrentUser: async () => {\r\n        const response = await api.get('/users/me');\r\n        return response.data;\r\n    },\r\n\r\n    isAuthenticated: () => {\r\n        const token = localStorage.getItem('token');\r\n        if (!token) return false;\r\n\r\n        try {\r\n            const payload = JSON.parse(atob(token.split('.')[1]));\r\n            const isExpired = payload.exp * 1000 < Date.now();\r\n            if (isExpired) {\r\n                localStorage.removeItem('token');\r\n                return false;\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            return false;\r\n        }\r\n    },\r\n\r\n    updateProfile: async (profileData: any) => {\r\n        const response = await api.put('/users/me', profileData);\r\n        return response.data;\r\n    }\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,OAAO;AAUvB,OAAO,MAAMC,WAAW,GAAG;EACvBC,KAAK,EAAE,MAAAA,CAAOC,KAAa,EAAEC,QAAgB,KAAK;IAC9C,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAAC,CAAC;IACpCD,MAAM,CAACE,MAAM,CAAC,UAAU,EAAEJ,KAAK,CAAC;IAChCE,MAAM,CAACE,MAAM,CAAC,UAAU,EAAEH,QAAQ,CAAC;;IAEnC;IACA,MAAMI,QAAQ,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,aAAa,EAAEJ,MAAM,EAAE;MACnDK,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC;IACF,IAAIF,QAAQ,CAACG,IAAI,CAACC,YAAY,EAAE;MAC5BC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEN,QAAQ,CAACG,IAAI,CAACC,YAAY,CAAC;IAC7D;IACA,OAAOJ,QAAQ,CAACG,IAAI;EACxB,CAAC;EAEDI,QAAQ,EAAE,MAAOC,QAAa,IAAK;IAC/B,MAAM;MAAEC,IAAI;MAAEd,KAAK;MAAEC;IAAS,CAAC,GAAGY,QAAQ;IAC1C,MAAMR,QAAQ,GAAG,MAAMR,GAAG,CAACS,IAAI,CAAC,SAAS,EAAE;MACvCN,KAAK;MACLC,QAAQ;MACRa;IACJ,CAAC,CAAC;IACF,OAAOT,QAAQ,CAACG,IAAI;EACxB,CAAC;EAEDO,MAAM,EAAEA,CAAA,KAAM;IACVL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;EACpC,CAAC;EAEDC,cAAc,EAAE,MAAAA,CAAA,KAAY;IACxB,MAAMZ,QAAQ,GAAG,MAAMR,GAAG,CAACqB,GAAG,CAAC,WAAW,CAAC;IAC3C,OAAOb,QAAQ,CAACG,IAAI;EACxB,CAAC;EAEDW,eAAe,EAAEA,CAAA,KAAM;IACnB,MAAMC,KAAK,GAAGV,YAAY,CAACW,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACD,KAAK,EAAE,OAAO,KAAK;IAExB,IAAI;MACA,MAAME,OAAO,GAAGC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACL,KAAK,CAACM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACrD,MAAMC,SAAS,GAAGL,OAAO,CAACM,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;MACjD,IAAIH,SAAS,EAAE;QACXjB,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;QAChC,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IACf,CAAC,CAAC,OAAOe,CAAC,EAAE;MACR,OAAO,KAAK;IAChB;EACJ,CAAC;EAEDC,aAAa,EAAE,MAAOC,WAAgB,IAAK;IACvC,MAAM5B,QAAQ,GAAG,MAAMR,GAAG,CAACqC,GAAG,CAAC,WAAW,EAAED,WAAW,CAAC;IACxD,OAAO5B,QAAQ,CAACG,IAAI;EACxB;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}