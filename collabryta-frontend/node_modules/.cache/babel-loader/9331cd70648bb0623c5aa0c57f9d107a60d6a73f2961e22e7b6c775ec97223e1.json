{"ast":null,"code":"import _objectSpread from\"D:/Collabryta/collabryta-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import api from'./api';export const taskService={getTasks:async filters=>{const response=await api.get('/tasks/');const tasks=response.data;// Map backend response to frontend requirements\nreturn tasks.map(t=>_objectSpread(_objectSpread({},t),{},{assigned_to_user:t.assignee,// Map assignee to assigned_to_user\nis_overdue:t.due_date?new Date(t.due_date)<new Date()&&t.status!=='Completed':false})).filter(t=>!(filters!==null&&filters!==void 0&&filters.status)||t.status===filters.status);},getStats:async()=>{// Mock stats for now\nreturn{total:10,completed:5,pending:3,overdue:2};},createTask:async task=>{// Map frontend assigned_to to backend assignee_id\nconst payload=_objectSpread(_objectSpread({},task),{},{assignee_id:task.assigned_to||task.assignee_id});const response=await api.post('/tasks/',payload);return response.data;},updateTask:async(id,task)=>{const payload=_objectSpread(_objectSpread({},task),{},{assignee_id:task.assigned_to!==undefined?task.assigned_to:task.assignee_id});const response=await api.put(\"/tasks/\".concat(id),payload);return response.data;},deleteTask:async id=>{const response=await api.delete(\"/tasks/\".concat(id));return response.data;},getTaskById:async id=>{const response=await api.get(\"/tasks/\".concat(id));const task=response.data;return _objectSpread(_objectSpread({},task),{},{assigned_to_user:task.assignee,is_overdue:task.due_date?new Date(task.due_date)<new Date()&&task.status!=='Completed':false});}};","map":{"version":3,"names":["api","taskService","getTasks","filters","response","get","tasks","data","map","t","_objectSpread","assigned_to_user","assignee","is_overdue","due_date","Date","status","filter","getStats","total","completed","pending","overdue","createTask","task","payload","assignee_id","assigned_to","post","updateTask","id","undefined","put","concat","deleteTask","delete","getTaskById"],"sources":["D:/Collabryta/collabryta-frontend/src/services/taskService.ts"],"sourcesContent":["import api from './api';\r\nimport { User } from './userService';\r\n\r\nexport interface Task {\r\n    id: number;\r\n    title: string;\r\n    description?: string;\r\n    status: string;\r\n    priority: string;\r\n    due_date?: string;\r\n    owner_id: number;\r\n    assignee_id?: number;\r\n    owner?: User;\r\n    assignee?: User;\r\n    // Mapped properties for frontend compatibility\r\n    assigned_to_user?: User;\r\n    is_overdue?: boolean;\r\n    created_at?: string; // ISO string from backend\r\n}\r\n\r\nexport const taskService = {\r\n    getTasks: async (filters?: { status?: string }): Promise<Task[]> => {\r\n        const response = await api.get('/tasks/');\r\n        const tasks: Task[] = response.data;\r\n\r\n        // Map backend response to frontend requirements\r\n        return tasks.map(t => ({\r\n            ...t,\r\n            assigned_to_user: t.assignee, // Map assignee to assigned_to_user\r\n            is_overdue: t.due_date ? new Date(t.due_date) < new Date() && t.status !== 'Completed' : false\r\n        })).filter(t => !filters?.status || t.status === filters.status);\r\n    },\r\n\r\n    getStats: async () => {\r\n        // Mock stats for now\r\n        return {\r\n            total: 10,\r\n            completed: 5,\r\n            pending: 3,\r\n            overdue: 2\r\n        };\r\n    },\r\n\r\n    createTask: async (task: { title: string; description?: string; status?: string; priority?: string; due_date?: string; assigned_to?: number; assignee_id?: number }) => {\r\n        // Map frontend assigned_to to backend assignee_id\r\n        const payload = {\r\n            ...task,\r\n            assignee_id: task.assigned_to || task.assignee_id\r\n        };\r\n        const response = await api.post('/tasks/', payload);\r\n        return response.data;\r\n    },\r\n\r\n    updateTask: async (id: number, task: Partial<Task> & { assigned_to?: number; assignee_id?: number }) => {\r\n        const payload = {\r\n            ...task,\r\n            assignee_id: task.assigned_to !== undefined ? task.assigned_to : task.assignee_id\r\n        };\r\n        const response = await api.put(`/tasks/${id}`, payload);\r\n        return response.data;\r\n    },\r\n\r\n    deleteTask: async (id: number) => {\r\n        const response = await api.delete(`/tasks/${id}`);\r\n        return response.data;\r\n    },\r\n\r\n    getTaskById: async (id: number): Promise<Task> => {\r\n        const response = await api.get(`/tasks/${id}`);\r\n        const task = response.data;\r\n        return {\r\n            ...task,\r\n            assigned_to_user: task.assignee,\r\n            is_overdue: task.due_date ? new Date(task.due_date) < new Date() && task.status !== 'Completed' : false\r\n        };\r\n    }\r\n};\r\n"],"mappings":"sHAAA,MAAO,CAAAA,GAAG,KAAM,OAAO,CAoBvB,MAAO,MAAM,CAAAC,WAAW,CAAG,CACvBC,QAAQ,CAAE,KAAO,CAAAC,OAA6B,EAAsB,CAChE,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAJ,GAAG,CAACK,GAAG,CAAC,SAAS,CAAC,CACzC,KAAM,CAAAC,KAAa,CAAGF,QAAQ,CAACG,IAAI,CAEnC;AACA,MAAO,CAAAD,KAAK,CAACE,GAAG,CAACC,CAAC,EAAAC,aAAA,CAAAA,aAAA,IACXD,CAAC,MACJE,gBAAgB,CAAEF,CAAC,CAACG,QAAQ,CAAE;AAC9BC,UAAU,CAAEJ,CAAC,CAACK,QAAQ,CAAG,GAAI,CAAAC,IAAI,CAACN,CAAC,CAACK,QAAQ,CAAC,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,EAAIN,CAAC,CAACO,MAAM,GAAK,WAAW,CAAG,KAAK,EAChG,CAAC,CAACC,MAAM,CAACR,CAAC,EAAI,EAACN,OAAO,SAAPA,OAAO,WAAPA,OAAO,CAAEa,MAAM,GAAIP,CAAC,CAACO,MAAM,GAAKb,OAAO,CAACa,MAAM,CAAC,CACpE,CAAC,CAEDE,QAAQ,CAAE,KAAAA,CAAA,GAAY,CAClB;AACA,MAAO,CACHC,KAAK,CAAE,EAAE,CACTC,SAAS,CAAE,CAAC,CACZC,OAAO,CAAE,CAAC,CACVC,OAAO,CAAE,CACb,CAAC,CACL,CAAC,CAEDC,UAAU,CAAE,KAAO,CAAAC,IAAgJ,EAAK,CACpK;AACA,KAAM,CAAAC,OAAO,CAAAf,aAAA,CAAAA,aAAA,IACNc,IAAI,MACPE,WAAW,CAAEF,IAAI,CAACG,WAAW,EAAIH,IAAI,CAACE,WAAW,EACpD,CACD,KAAM,CAAAtB,QAAQ,CAAG,KAAM,CAAAJ,GAAG,CAAC4B,IAAI,CAAC,SAAS,CAAEH,OAAO,CAAC,CACnD,MAAO,CAAArB,QAAQ,CAACG,IAAI,CACxB,CAAC,CAEDsB,UAAU,CAAE,KAAAA,CAAOC,EAAU,CAAEN,IAAoE,GAAK,CACpG,KAAM,CAAAC,OAAO,CAAAf,aAAA,CAAAA,aAAA,IACNc,IAAI,MACPE,WAAW,CAAEF,IAAI,CAACG,WAAW,GAAKI,SAAS,CAAGP,IAAI,CAACG,WAAW,CAAGH,IAAI,CAACE,WAAW,EACpF,CACD,KAAM,CAAAtB,QAAQ,CAAG,KAAM,CAAAJ,GAAG,CAACgC,GAAG,WAAAC,MAAA,CAAWH,EAAE,EAAIL,OAAO,CAAC,CACvD,MAAO,CAAArB,QAAQ,CAACG,IAAI,CACxB,CAAC,CAED2B,UAAU,CAAE,KAAO,CAAAJ,EAAU,EAAK,CAC9B,KAAM,CAAA1B,QAAQ,CAAG,KAAM,CAAAJ,GAAG,CAACmC,MAAM,WAAAF,MAAA,CAAWH,EAAE,CAAE,CAAC,CACjD,MAAO,CAAA1B,QAAQ,CAACG,IAAI,CACxB,CAAC,CAED6B,WAAW,CAAE,KAAO,CAAAN,EAAU,EAAoB,CAC9C,KAAM,CAAA1B,QAAQ,CAAG,KAAM,CAAAJ,GAAG,CAACK,GAAG,WAAA4B,MAAA,CAAWH,EAAE,CAAE,CAAC,CAC9C,KAAM,CAAAN,IAAI,CAAGpB,QAAQ,CAACG,IAAI,CAC1B,OAAAG,aAAA,CAAAA,aAAA,IACOc,IAAI,MACPb,gBAAgB,CAAEa,IAAI,CAACZ,QAAQ,CAC/BC,UAAU,CAAEW,IAAI,CAACV,QAAQ,CAAG,GAAI,CAAAC,IAAI,CAACS,IAAI,CAACV,QAAQ,CAAC,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,EAAIS,IAAI,CAACR,MAAM,GAAK,WAAW,CAAG,KAAK,GAE/G,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}