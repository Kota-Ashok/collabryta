{"ast":null,"code":"var _jsxFileName = \"D:\\\\Collabryta\\\\collabryta-frontend\\\\src\\\\pages\\\\Chat\\\\ChatPage.tsx\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useMemo } from \"react\";\nimport { Phone, Info, Mic, Send, Square, Play, Pause, ArrowLeft, Users, User } from \"lucide-react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatPage = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const users = [{\n    id: 1,\n    name: \"Team Collabryta\",\n    initials: \"TC\",\n    color: \"bg-orange-500\",\n    type: \"group\"\n  }, {\n    id: 2,\n    name: \"Project Alpha\",\n    initials: \"PA\",\n    color: \"bg-teal-500\",\n    type: \"group\"\n  }, {\n    id: 3,\n    name: \"Alice Johnson\",\n    initials: \"AJ\",\n    color: \"bg-blue-500\",\n    type: \"personal\"\n  }, {\n    id: 4,\n    name: \"Bob Reynolds\",\n    initials: \"BR\",\n    color: \"bg-green-500\",\n    type: \"personal\"\n  }, {\n    id: 5,\n    name: \"Sophia Lee\",\n    initials: \"SL\",\n    color: \"bg-purple-500\",\n    type: \"personal\"\n  }];\n  const [activeTab, setActiveTab] = useState(\"personal\");\n  const [activeChat, setActiveChat] = useState(null);\n  const [messages, setMessages] = useState({\n    3: [{\n      id: 1,\n      sender: \"them\",\n      text: \"Hey there! Howâ€™s your day going?\",\n      time: \"10:02 AM\"\n    }, {\n      id: 2,\n      sender: \"me\",\n      text: \"Pretty good! Just improving our new chat UI ðŸ˜„\",\n      time: \"10:05 AM\"\n    }],\n    4: [{\n      id: 1,\n      sender: \"them\",\n      text: \"Can you send me the report?\",\n      time: \"09:40 AM\"\n    }]\n  });\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [isRecording, setIsRecording] = useState(false);\n  const [recordingStartTime, setRecordingStartTime] = useState(null);\n  const [elapsedTime, setElapsedTime] = useState(0);\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const messageEndRef = useRef(null);\n  const currentMessages = useMemo(() => activeChat ? messages[activeChat.id] || [] : [], [messages, activeChat]);\n  useEffect(() => {\n    var _messageEndRef$curren;\n    (_messageEndRef$curren = messageEndRef.current) === null || _messageEndRef$curren === void 0 ? void 0 : _messageEndRef$curren.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [currentMessages]);\n  useEffect(() => {\n    let timer;\n    if (isRecording && recordingStartTime) {\n      timer = setInterval(() => {\n        setElapsedTime(Math.floor((Date.now() - recordingStartTime) / 1000));\n      }, 1000);\n    }\n    return () => clearInterval(timer);\n  }, [isRecording, recordingStartTime]);\n  const handleSend = () => {\n    if (!activeChat || !newMessage.trim()) return;\n    const msg = {\n      id: Date.now(),\n      sender: \"me\",\n      text: newMessage.trim(),\n      time: new Date().toLocaleTimeString([], {\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n      })\n    };\n    setMessages(prev => ({\n      ...prev,\n      [activeChat.id]: [...(prev[activeChat.id] || []), msg]\n    }));\n    setNewMessage(\"\");\n  };\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({\n        audio: true\n      });\n      const recorder = new MediaRecorder(stream);\n      mediaRecorderRef.current = recorder;\n      audioChunksRef.current = [];\n      recorder.ondataavailable = event => {\n        audioChunksRef.current.push(event.data);\n      };\n      recorder.onstop = () => {\n        if (!activeChat) return;\n        const blob = new Blob(audioChunksRef.current, {\n          type: \"audio/webm\"\n        });\n        const url = URL.createObjectURL(blob);\n        const msg = {\n          id: Date.now(),\n          sender: \"me\",\n          text: \"\",\n          audioUrl: url,\n          duration: Math.max(1, Math.round(elapsedTime)),\n          time: new Date().toLocaleTimeString([], {\n            hour: \"2-digit\",\n            minute: \"2-digit\"\n          })\n        };\n        setMessages(prev => ({\n          ...prev,\n          [activeChat.id]: [...(prev[activeChat.id] || []), msg]\n        }));\n\n        // âœ… Automatically stop recording and turn off mic\n        stream.getTracks().forEach(track => track.stop());\n        setIsRecording(false);\n        setRecordingStartTime(null);\n      };\n      recorder.start();\n      setIsRecording(true);\n      setRecordingStartTime(Date.now());\n      setElapsedTime(0);\n    } catch (err) {\n      console.error(\"Microphone access denied:\", err);\n    }\n  };\n  const stopRecording = () => {\n    var _mediaRecorderRef$cur;\n    (_mediaRecorderRef$cur = mediaRecorderRef.current) === null || _mediaRecorderRef$cur === void 0 ? void 0 : _mediaRecorderRef$cur.stop();\n    setIsRecording(false);\n    setRecordingStartTime(null);\n  };\n  const VoiceMessage = ({\n    url,\n    duration = 0,\n    sender\n  }) => {\n    _s();\n    const [isPlaying, setIsPlaying] = useState(false);\n    const audioRef = useRef(null);\n    const togglePlay = () => {\n      if (!audioRef.current) return;\n      isPlaying ? audioRef.current.pause() : audioRef.current.play();\n    };\n    useEffect(() => {\n      const audio = audioRef.current;\n      if (!audio) return;\n      const endHandler = () => setIsPlaying(false);\n      audio.addEventListener(\"ended\", endHandler);\n      return () => audio.removeEventListener(\"ended\", endHandler);\n    }, []);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex items-center gap-3 px-4 py-3 rounded-xl shadow-sm border ${sender === \"me\" ? \"bg-blue-600 text-white border-blue-500\" : \"bg-white text-gray-800\"}`,\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: togglePlay,\n        className: `p-2 rounded-full ${sender === \"me\" ? \"bg-blue-700\" : \"bg-gray-100\"} hover:scale-110 transition`,\n        children: isPlaying ? /*#__PURE__*/_jsxDEV(Pause, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 24\n        }, this) : /*#__PURE__*/_jsxDEV(Play, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 46\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"h-1.5 bg-gray-300 rounded-full overflow-hidden\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `h-1.5 ${sender === \"me\" ? \"bg-white\" : \"bg-blue-600\"} transition-all`,\n            style: {\n              width: isPlaying ? \"100%\" : \"0%\",\n              transition: \"width 3s linear\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-xs mt-1 opacity-70\",\n          children: [duration, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioRef,\n        src: url,\n        onPlay: () => setIsPlaying(true),\n        onPause: () => setIsPlaying(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this);\n  };\n  _s(VoiceMessage, \"kgkST1S2DKv5NXgsyN6Nz0K7EnA=\");\n  const filteredChats = users.filter(u => activeTab === \"groups\" ? u.type === \"group\" : u.type === \"personal\");\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-white text-gray-900 p-10 transition-all duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"flex justify-between items-center mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold\",\n        children: \"\\uD83D\\uDCAC Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), !activeChat ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4 mb-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"personal\"),\n          className: `flex items-center gap-2 px-5 py-2 rounded-lg text-sm font-medium shadow-sm transition ${activeTab === \"personal\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,\n          children: [/*#__PURE__*/_jsxDEV(User, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 15\n          }, this), \" Personal Chats\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab(\"groups\"),\n          className: `flex items-center gap-2 px-5 py-2 rounded-lg text-sm font-medium shadow-sm transition ${activeTab === \"groups\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,\n          children: [/*#__PURE__*/_jsxDEV(Users, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 231,\n            columnNumber: 15\n          }, this), \" Group Chats\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",\n        children: filteredChats.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => setActiveChat(user),\n          className: \"p-6 bg-gray-50 border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition cursor-pointer\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: `w-14 h-14 flex items-center justify-center rounded-full text-white font-bold text-lg ${user.color}`,\n              children: user.initials\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"font-semibold text-lg\",\n                children: user.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 250,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: user.type === \"group\" ? \"Group Chat\" : \"Personal Chat\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 249,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 17\n          }, this)\n        }, user.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 border border-gray-200 rounded-2xl shadow-md overflow-hidden\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between bg-white border-b border-gray-200 px-6 py-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveChat(null),\n            className: \"p-2 rounded-lg hover:bg-gray-100\",\n            children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n              className: \"w-5 h-5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `w-10 h-10 flex items-center justify-center rounded-full text-white font-semibold ${activeChat.color}`,\n            children: activeChat.initials\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"font-semibold\",\n              children: activeChat.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-500\",\n              children: activeChat.type === \"group\" ? \"Group Chat\" : \"Online now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(Phone, {\n            className: \"w-5 h-5 text-gray-500 hover:text-blue-600 cursor-pointer transition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Info, {\n            className: \"w-5 h-5 text-gray-500 hover:text-blue-600 cursor-pointer transition\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 263,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-[65vh] overflow-y-auto p-6 space-y-4 bg-gray-50\",\n        children: [currentMessages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex flex-col ${msg.sender === \"me\" ? \"items-end\" : \"items-start\"}`,\n          children: [msg.audioUrl ? /*#__PURE__*/_jsxDEV(VoiceMessage, {\n            url: msg.audioUrl,\n            duration: msg.duration,\n            sender: msg.sender\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `px-4 py-3 rounded-xl text-sm shadow-sm border ${msg.sender === \"me\" ? \"bg-blue-600 text-white border-blue-500\" : \"bg-white text-gray-800\"}`,\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs mt-1 text-gray-400\",\n            children: msg.time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 17\n          }, this)]\n        }, msg.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messageEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border-t border-gray-200 bg-white p-4 flex items-center gap-3 relative\",\n        children: [isRecording && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute inset-0 bg-red-50/90 flex flex-col justify-center items-center rounded-b-2xl z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-3 h-3 bg-red-600 rounded-full animate-ping\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-red-700 font-semibold text-sm\",\n              children: [\"Recording... (\", elapsedTime, \"s)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: stopRecording,\n            className: \"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Square, {\n              className: \"w-4 h-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this), \" Stop\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 15\n        }, this), !isRecording && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startRecording,\n          className: \"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 shadow-sm\",\n          title: \"Record Voice\",\n          children: /*#__PURE__*/_jsxDEV(Mic, {\n            className: \"w-5 h-5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          placeholder: \"Type a message...\",\n          disabled: isRecording,\n          className: `flex-1 border border-gray-300 rounded-lg p-2.5 resize-none focus:outline-none focus:ring-2 focus:ring-blue-400 min-h-[48px] max-h-32 ${isRecording ? \"opacity-40 cursor-not-allowed\" : \"\"}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSend,\n          disabled: isRecording,\n          className: `px-5 py-2 rounded-lg font-medium flex items-center gap-2 transition shadow-sm ${isRecording ? \"bg-gray-300 text-gray-500 cursor-not-allowed\" : \"bg-blue-600 hover:bg-blue-700 text-white\"}`,\n          children: [/*#__PURE__*/_jsxDEV(Send, {\n            className: \"w-4 h-4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this), \" Send\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n};\n_s2(ChatPage, \"FtXRCm87IeQNg6av2tcH+TtBWqw=\");\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useMemo","Phone","Info","Mic","Send","Square","Play","Pause","ArrowLeft","Users","User","jsxDEV","_jsxDEV","Fragment","_Fragment","ChatPage","_s2","_s","$RefreshSig$","users","id","name","initials","color","type","activeTab","setActiveTab","activeChat","setActiveChat","messages","setMessages","sender","text","time","newMessage","setNewMessage","isRecording","setIsRecording","recordingStartTime","setRecordingStartTime","elapsedTime","setElapsedTime","mediaRecorderRef","audioChunksRef","messageEndRef","currentMessages","_messageEndRef$curren","current","scrollIntoView","behavior","timer","setInterval","Math","floor","Date","now","clearInterval","handleSend","trim","msg","toLocaleTimeString","hour","minute","prev","startRecording","stream","navigator","mediaDevices","getUserMedia","audio","recorder","MediaRecorder","ondataavailable","event","push","data","onstop","blob","Blob","url","URL","createObjectURL","audioUrl","duration","max","round","getTracks","forEach","track","stop","start","err","console","error","stopRecording","_mediaRecorderRef$cur","VoiceMessage","isPlaying","setIsPlaying","audioRef","togglePlay","pause","play","endHandler","addEventListener","removeEventListener","className","children","onClick","size","fileName","_jsxFileName","lineNumber","columnNumber","style","width","transition","ref","src","onPlay","onPause","filteredChats","filter","u","map","user","title","value","onChange","e","target","placeholder","disabled","_c","$RefreshReg$"],"sources":["D:/Collabryta/collabryta-frontend/src/pages/Chat/ChatPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useMemo } from \"react\";\r\nimport {\r\n  Phone,\r\n  Info,\r\n  Mic,\r\n  Send,\r\n  Square,\r\n  Play,\r\n  Pause,\r\n  ArrowLeft,\r\n  Users,\r\n  User,\r\n} from \"lucide-react\";\r\n\r\ninterface ChatUser {\r\n  id: number;\r\n  name: string;\r\n  initials: string;\r\n  color: string;\r\n  type: \"group\" | \"personal\";\r\n}\r\n\r\ninterface Message {\r\n  id: number;\r\n  sender: \"me\" | \"them\";\r\n  text: string;\r\n  time: string;\r\n  audioUrl?: string;\r\n  duration?: number;\r\n}\r\n\r\nconst ChatPage: React.FC = () => {\r\n  const users: ChatUser[] = [\r\n    { id: 1, name: \"Team Collabryta\", initials: \"TC\", color: \"bg-orange-500\", type: \"group\" },\r\n    { id: 2, name: \"Project Alpha\", initials: \"PA\", color: \"bg-teal-500\", type: \"group\" },\r\n    { id: 3, name: \"Alice Johnson\", initials: \"AJ\", color: \"bg-blue-500\", type: \"personal\" },\r\n    { id: 4, name: \"Bob Reynolds\", initials: \"BR\", color: \"bg-green-500\", type: \"personal\" },\r\n    { id: 5, name: \"Sophia Lee\", initials: \"SL\", color: \"bg-purple-500\", type: \"personal\" },\r\n  ];\r\n\r\n  const [activeTab, setActiveTab] = useState<\"groups\" | \"personal\">(\"personal\");\r\n  const [activeChat, setActiveChat] = useState<ChatUser | null>(null);\r\n\r\n  const [messages, setMessages] = useState<Record<number, Message[]>>({\r\n    3: [\r\n      { id: 1, sender: \"them\", text: \"Hey there! Howâ€™s your day going?\", time: \"10:02 AM\" },\r\n      { id: 2, sender: \"me\", text: \"Pretty good! Just improving our new chat UI ðŸ˜„\", time: \"10:05 AM\" },\r\n    ],\r\n    4: [{ id: 1, sender: \"them\", text: \"Can you send me the report?\", time: \"09:40 AM\" }],\r\n  });\r\n\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const [recordingStartTime, setRecordingStartTime] = useState<number | null>(null);\r\n  const [elapsedTime, setElapsedTime] = useState(0);\r\n\r\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\r\n  const audioChunksRef = useRef<Blob[]>([]);\r\n  const messageEndRef = useRef<HTMLDivElement>(null);\r\n\r\n  const currentMessages = useMemo(\r\n    () => (activeChat ? messages[activeChat.id] || [] : []),\r\n    [messages, activeChat]\r\n  );\r\n\r\n  useEffect(() => {\r\n    messageEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [currentMessages]);\r\n\r\n  useEffect(() => {\r\n    let timer: NodeJS.Timeout;\r\n    if (isRecording && recordingStartTime) {\r\n      timer = setInterval(() => {\r\n        setElapsedTime(Math.floor((Date.now() - recordingStartTime) / 1000));\r\n      }, 1000);\r\n    }\r\n    return () => clearInterval(timer);\r\n  }, [isRecording, recordingStartTime]);\r\n\r\n  const handleSend = () => {\r\n    if (!activeChat || !newMessage.trim()) return;\r\n    const msg: Message = {\r\n      id: Date.now(),\r\n      sender: \"me\",\r\n      text: newMessage.trim(),\r\n      time: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\r\n    };\r\n    setMessages((prev) => ({\r\n      ...prev,\r\n      [activeChat.id]: [...(prev[activeChat.id] || []), msg],\r\n    }));\r\n    setNewMessage(\"\");\r\n  };\r\n\r\n  const startRecording = async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      const recorder = new MediaRecorder(stream);\r\n      mediaRecorderRef.current = recorder;\r\n      audioChunksRef.current = [];\r\n\r\n      recorder.ondataavailable = (event) => {\r\n        audioChunksRef.current.push(event.data);\r\n      };\r\n\r\n      recorder.onstop = () => {\r\n        if (!activeChat) return;\r\n        const blob = new Blob(audioChunksRef.current, { type: \"audio/webm\" });\r\n        const url = URL.createObjectURL(blob);\r\n        const msg: Message = {\r\n          id: Date.now(),\r\n          sender: \"me\",\r\n          text: \"\",\r\n          audioUrl: url,\r\n          duration: Math.max(1, Math.round(elapsedTime)),\r\n          time: new Date().toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" }),\r\n        };\r\n        setMessages((prev) => ({\r\n          ...prev,\r\n          [activeChat.id]: [...(prev[activeChat.id] || []), msg],\r\n        }));\r\n\r\n        // âœ… Automatically stop recording and turn off mic\r\n        stream.getTracks().forEach((track) => track.stop());\r\n        setIsRecording(false);\r\n        setRecordingStartTime(null);\r\n      };\r\n\r\n      recorder.start();\r\n      setIsRecording(true);\r\n      setRecordingStartTime(Date.now());\r\n      setElapsedTime(0);\r\n    } catch (err) {\r\n      console.error(\"Microphone access denied:\", err);\r\n    }\r\n  };\r\n\r\n  const stopRecording = () => {\r\n    mediaRecorderRef.current?.stop();\r\n    setIsRecording(false);\r\n    setRecordingStartTime(null);\r\n  };\r\n\r\n  const VoiceMessage: React.FC<{ url: string; duration?: number; sender: \"me\" | \"them\" }> = ({\r\n    url,\r\n    duration = 0,\r\n    sender,\r\n  }) => {\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    const audioRef = useRef<HTMLAudioElement>(null);\r\n\r\n    const togglePlay = () => {\r\n      if (!audioRef.current) return;\r\n      isPlaying ? audioRef.current.pause() : audioRef.current.play();\r\n    };\r\n\r\n    useEffect(() => {\r\n      const audio = audioRef.current;\r\n      if (!audio) return;\r\n      const endHandler = () => setIsPlaying(false);\r\n      audio.addEventListener(\"ended\", endHandler);\r\n      return () => audio.removeEventListener(\"ended\", endHandler);\r\n    }, []);\r\n\r\n    return (\r\n      <div\r\n        className={`flex items-center gap-3 px-4 py-3 rounded-xl shadow-sm border ${\r\n          sender === \"me\" ? \"bg-blue-600 text-white border-blue-500\" : \"bg-white text-gray-800\"\r\n        }`}\r\n      >\r\n        <button\r\n          onClick={togglePlay}\r\n          className={`p-2 rounded-full ${\r\n            sender === \"me\" ? \"bg-blue-700\" : \"bg-gray-100\"\r\n          } hover:scale-110 transition`}\r\n        >\r\n          {isPlaying ? <Pause size={16} /> : <Play size={16} />}\r\n        </button>\r\n        <div className=\"flex-1\">\r\n          <div className=\"h-1.5 bg-gray-300 rounded-full overflow-hidden\">\r\n            <div\r\n              className={`h-1.5 ${sender === \"me\" ? \"bg-white\" : \"bg-blue-600\"} transition-all`}\r\n              style={{ width: isPlaying ? \"100%\" : \"0%\", transition: \"width 3s linear\" }}\r\n            />\r\n          </div>\r\n          <p className=\"text-xs mt-1 opacity-70\">{duration}s</p>\r\n        </div>\r\n        <audio\r\n          ref={audioRef}\r\n          src={url}\r\n          onPlay={() => setIsPlaying(true)}\r\n          onPause={() => setIsPlaying(false)}\r\n        />\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const filteredChats = users.filter((u) =>\r\n    activeTab === \"groups\" ? u.type === \"group\" : u.type === \"personal\"\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-white text-gray-900 p-10 transition-all duration-300\">\r\n      {/* Header */}\r\n      <header className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold\">ðŸ’¬ Chat</h1>\r\n      </header>\r\n\r\n      {!activeChat ? (\r\n        <>\r\n          {/* Tabs */}\r\n          <div className=\"flex gap-4 mb-8\">\r\n            <button\r\n              onClick={() => setActiveTab(\"personal\")}\r\n              className={`flex items-center gap-2 px-5 py-2 rounded-lg text-sm font-medium shadow-sm transition ${\r\n                activeTab === \"personal\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              <User size={16} /> Personal Chats\r\n            </button>\r\n            <button\r\n              onClick={() => setActiveTab(\"groups\")}\r\n              className={`flex items-center gap-2 px-5 py-2 rounded-lg text-sm font-medium shadow-sm transition ${\r\n                activeTab === \"groups\"\r\n                  ? \"bg-blue-600 text-white\"\r\n                  : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"\r\n              }`}\r\n            >\r\n              <Users size={16} /> Group Chats\r\n            </button>\r\n          </div>\r\n\r\n          {/* Chat Cards */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n            {filteredChats.map((user) => (\r\n              <div\r\n                key={user.id}\r\n                onClick={() => setActiveChat(user)}\r\n                className=\"p-6 bg-gray-50 border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition cursor-pointer\"\r\n              >\r\n                <div className=\"flex items-center gap-4\">\r\n                  <div\r\n                    className={`w-14 h-14 flex items-center justify-center rounded-full text-white font-bold text-lg ${user.color}`}\r\n                  >\r\n                    {user.initials}\r\n                  </div>\r\n                  <div>\r\n                    <h2 className=\"font-semibold text-lg\">{user.name}</h2>\r\n                    <p className=\"text-sm text-gray-500\">\r\n                      {user.type === \"group\" ? \"Group Chat\" : \"Personal Chat\"}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"bg-gray-50 border border-gray-200 rounded-2xl shadow-md overflow-hidden\">\r\n          {/* Top Bar */}\r\n          <div className=\"flex items-center justify-between bg-white border-b border-gray-200 px-6 py-4\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <button\r\n                onClick={() => setActiveChat(null)}\r\n                className=\"p-2 rounded-lg hover:bg-gray-100\"\r\n              >\r\n                <ArrowLeft className=\"w-5 h-5\" />\r\n              </button>\r\n              <div\r\n                className={`w-10 h-10 flex items-center justify-center rounded-full text-white font-semibold ${activeChat.color}`}\r\n              >\r\n                {activeChat.initials}\r\n              </div>\r\n              <div>\r\n                <h2 className=\"font-semibold\">{activeChat.name}</h2>\r\n                <p className=\"text-xs text-gray-500\">\r\n                  {activeChat.type === \"group\" ? \"Group Chat\" : \"Online now\"}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-4\">\r\n              <Phone className=\"w-5 h-5 text-gray-500 hover:text-blue-600 cursor-pointer transition\" />\r\n              <Info className=\"w-5 h-5 text-gray-500 hover:text-blue-600 cursor-pointer transition\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Messages */}\r\n          <div className=\"h-[65vh] overflow-y-auto p-6 space-y-4 bg-gray-50\">\r\n            {currentMessages.map((msg) => (\r\n              <div\r\n                key={msg.id}\r\n                className={`flex flex-col ${\r\n                  msg.sender === \"me\" ? \"items-end\" : \"items-start\"\r\n                }`}\r\n              >\r\n                {msg.audioUrl ? (\r\n                  <VoiceMessage url={msg.audioUrl} duration={msg.duration} sender={msg.sender} />\r\n                ) : (\r\n                  <div\r\n                    className={`px-4 py-3 rounded-xl text-sm shadow-sm border ${\r\n                      msg.sender === \"me\"\r\n                        ? \"bg-blue-600 text-white border-blue-500\"\r\n                        : \"bg-white text-gray-800\"\r\n                    }`}\r\n                  >\r\n                    {msg.text}\r\n                  </div>\r\n                )}\r\n                <p className=\"text-xs mt-1 text-gray-400\">{msg.time}</p>\r\n              </div>\r\n            ))}\r\n            <div ref={messageEndRef} />\r\n          </div>\r\n\r\n          {/* Input */}\r\n          <div className=\"border-t border-gray-200 bg-white p-4 flex items-center gap-3 relative\">\r\n            {isRecording && (\r\n              <div className=\"absolute inset-0 bg-red-50/90 flex flex-col justify-center items-center rounded-b-2xl z-10\">\r\n                <div className=\"flex items-center gap-3\">\r\n                  <div className=\"w-3 h-3 bg-red-600 rounded-full animate-ping\" />\r\n                  <span className=\"text-red-700 font-semibold text-sm\">\r\n                    Recording... ({elapsedTime}s)\r\n                  </span>\r\n                </div>\r\n                <button\r\n                  onClick={stopRecording}\r\n                  className=\"mt-3 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center gap-2\"\r\n                >\r\n                  <Square className=\"w-4 h-4\" /> Stop\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {!isRecording && (\r\n              <button\r\n                onClick={startRecording}\r\n                className=\"p-3 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 shadow-sm\"\r\n                title=\"Record Voice\"\r\n              >\r\n                <Mic className=\"w-5 h-5\" />\r\n              </button>\r\n            )}\r\n\r\n            <textarea\r\n              value={newMessage}\r\n              onChange={(e) => setNewMessage(e.target.value)}\r\n              placeholder=\"Type a message...\"\r\n              disabled={isRecording}\r\n              className={`flex-1 border border-gray-300 rounded-lg p-2.5 resize-none focus:outline-none focus:ring-2 focus:ring-blue-400 min-h-[48px] max-h-32 ${\r\n                isRecording ? \"opacity-40 cursor-not-allowed\" : \"\"\r\n              }`}\r\n            />\r\n\r\n            <button\r\n              onClick={handleSend}\r\n              disabled={isRecording}\r\n              className={`px-5 py-2 rounded-lg font-medium flex items-center gap-2 transition shadow-sm ${\r\n                isRecording\r\n                  ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\r\n                  : \"bg-blue-600 hover:bg-blue-700 text-white\"\r\n              }`}\r\n            >\r\n              <Send className=\"w-4 h-4\" /> Send\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPage;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,EAAEC,OAAO,QAAQ,OAAO;AACnE,SACEC,KAAK,EACLC,IAAI,EACJC,GAAG,EACHC,IAAI,EACJC,MAAM,EACNC,IAAI,EACJC,KAAK,EACLC,SAAS,EACTC,KAAK,EACLC,IAAI,QACC,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAmBtB,MAAMC,QAAkB,GAAGA,CAAA,KAAM;EAAAC,GAAA;EAAA,IAAAC,EAAA,GAAAC,YAAA;EAC/B,MAAMC,KAAiB,GAAG,CACxB;IAAEC,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,iBAAiB;IAAEC,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE,eAAe;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACzF;IAAEJ,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,eAAe;IAAEC,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE,aAAa;IAAEC,IAAI,EAAE;EAAQ,CAAC,EACrF;IAAEJ,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,eAAe;IAAEC,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE,aAAa;IAAEC,IAAI,EAAE;EAAW,CAAC,EACxF;IAAEJ,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,cAAc;IAAEC,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE,cAAc;IAAEC,IAAI,EAAE;EAAW,CAAC,EACxF;IAAEJ,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAE,YAAY;IAAEC,QAAQ,EAAE,IAAI;IAAEC,KAAK,EAAE,eAAe;IAAEC,IAAI,EAAE;EAAW,CAAC,CACxF;EAED,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG7B,QAAQ,CAAwB,UAAU,CAAC;EAC7E,MAAM,CAAC8B,UAAU,EAAEC,aAAa,CAAC,GAAG/B,QAAQ,CAAkB,IAAI,CAAC;EAEnE,MAAM,CAACgC,QAAQ,EAAEC,WAAW,CAAC,GAAGjC,QAAQ,CAA4B;IAClE,CAAC,EAAE,CACD;MAAEuB,EAAE,EAAE,CAAC;MAAEW,MAAM,EAAE,MAAM;MAAEC,IAAI,EAAE,kCAAkC;MAAEC,IAAI,EAAE;IAAW,CAAC,EACrF;MAAEb,EAAE,EAAE,CAAC;MAAEW,MAAM,EAAE,IAAI;MAAEC,IAAI,EAAE,gDAAgD;MAAEC,IAAI,EAAE;IAAW,CAAC,CAClG;IACD,CAAC,EAAE,CAAC;MAAEb,EAAE,EAAE,CAAC;MAAEW,MAAM,EAAE,MAAM;MAAEC,IAAI,EAAE,6BAA6B;MAAEC,IAAI,EAAE;IAAW,CAAC;EACtF,CAAC,CAAC;EAEF,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGtC,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACuC,WAAW,EAAEC,cAAc,CAAC,GAAGxC,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM,CAACyC,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG1C,QAAQ,CAAgB,IAAI,CAAC;EACjF,MAAM,CAAC2C,WAAW,EAAEC,cAAc,CAAC,GAAG5C,QAAQ,CAAC,CAAC,CAAC;EAEjD,MAAM6C,gBAAgB,GAAG3C,MAAM,CAAuB,IAAI,CAAC;EAC3D,MAAM4C,cAAc,GAAG5C,MAAM,CAAS,EAAE,CAAC;EACzC,MAAM6C,aAAa,GAAG7C,MAAM,CAAiB,IAAI,CAAC;EAElD,MAAM8C,eAAe,GAAG7C,OAAO,CAC7B,MAAO2B,UAAU,GAAGE,QAAQ,CAACF,UAAU,CAACP,EAAE,CAAC,IAAI,EAAE,GAAG,EAAG,EACvD,CAACS,QAAQ,EAAEF,UAAU,CACvB,CAAC;EAED7B,SAAS,CAAC,MAAM;IAAA,IAAAgD,qBAAA;IACd,CAAAA,qBAAA,GAAAF,aAAa,CAACG,OAAO,cAAAD,qBAAA,uBAArBA,qBAAA,CAAuBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAC/D,CAAC,EAAE,CAACJ,eAAe,CAAC,CAAC;EAErB/C,SAAS,CAAC,MAAM;IACd,IAAIoD,KAAqB;IACzB,IAAId,WAAW,IAAIE,kBAAkB,EAAE;MACrCY,KAAK,GAAGC,WAAW,CAAC,MAAM;QACxBV,cAAc,CAACW,IAAI,CAACC,KAAK,CAAC,CAACC,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGjB,kBAAkB,IAAI,IAAI,CAAC,CAAC;MACtE,CAAC,EAAE,IAAI,CAAC;IACV;IACA,OAAO,MAAMkB,aAAa,CAACN,KAAK,CAAC;EACnC,CAAC,EAAE,CAACd,WAAW,EAAEE,kBAAkB,CAAC,CAAC;EAErC,MAAMmB,UAAU,GAAGA,CAAA,KAAM;IACvB,IAAI,CAAC9B,UAAU,IAAI,CAACO,UAAU,CAACwB,IAAI,CAAC,CAAC,EAAE;IACvC,MAAMC,GAAY,GAAG;MACnBvC,EAAE,EAAEkC,IAAI,CAACC,GAAG,CAAC,CAAC;MACdxB,MAAM,EAAE,IAAI;MACZC,IAAI,EAAEE,UAAU,CAACwB,IAAI,CAAC,CAAC;MACvBzB,IAAI,EAAE,IAAIqB,IAAI,CAAC,CAAC,CAACM,kBAAkB,CAAC,EAAE,EAAE;QAAEC,IAAI,EAAE,SAAS;QAAEC,MAAM,EAAE;MAAU,CAAC;IAChF,CAAC;IACDhC,WAAW,CAAEiC,IAAI,KAAM;MACrB,GAAGA,IAAI;MACP,CAACpC,UAAU,CAACP,EAAE,GAAG,CAAC,IAAI2C,IAAI,CAACpC,UAAU,CAACP,EAAE,CAAC,IAAI,EAAE,CAAC,EAAEuC,GAAG;IACvD,CAAC,CAAC,CAAC;IACHxB,aAAa,CAAC,EAAE,CAAC;EACnB,CAAC;EAED,MAAM6B,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI;MACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;QAAEC,KAAK,EAAE;MAAK,CAAC,CAAC;MACzE,MAAMC,QAAQ,GAAG,IAAIC,aAAa,CAACN,MAAM,CAAC;MAC1CvB,gBAAgB,CAACK,OAAO,GAAGuB,QAAQ;MACnC3B,cAAc,CAACI,OAAO,GAAG,EAAE;MAE3BuB,QAAQ,CAACE,eAAe,GAAIC,KAAK,IAAK;QACpC9B,cAAc,CAACI,OAAO,CAAC2B,IAAI,CAACD,KAAK,CAACE,IAAI,CAAC;MACzC,CAAC;MAEDL,QAAQ,CAACM,MAAM,GAAG,MAAM;QACtB,IAAI,CAACjD,UAAU,EAAE;QACjB,MAAMkD,IAAI,GAAG,IAAIC,IAAI,CAACnC,cAAc,CAACI,OAAO,EAAE;UAAEvB,IAAI,EAAE;QAAa,CAAC,CAAC;QACrE,MAAMuD,GAAG,GAAGC,GAAG,CAACC,eAAe,CAACJ,IAAI,CAAC;QACrC,MAAMlB,GAAY,GAAG;UACnBvC,EAAE,EAAEkC,IAAI,CAACC,GAAG,CAAC,CAAC;UACdxB,MAAM,EAAE,IAAI;UACZC,IAAI,EAAE,EAAE;UACRkD,QAAQ,EAAEH,GAAG;UACbI,QAAQ,EAAE/B,IAAI,CAACgC,GAAG,CAAC,CAAC,EAAEhC,IAAI,CAACiC,KAAK,CAAC7C,WAAW,CAAC,CAAC;UAC9CP,IAAI,EAAE,IAAIqB,IAAI,CAAC,CAAC,CAACM,kBAAkB,CAAC,EAAE,EAAE;YAAEC,IAAI,EAAE,SAAS;YAAEC,MAAM,EAAE;UAAU,CAAC;QAChF,CAAC;QACDhC,WAAW,CAAEiC,IAAI,KAAM;UACrB,GAAGA,IAAI;UACP,CAACpC,UAAU,CAACP,EAAE,GAAG,CAAC,IAAI2C,IAAI,CAACpC,UAAU,CAACP,EAAE,CAAC,IAAI,EAAE,CAAC,EAAEuC,GAAG;QACvD,CAAC,CAAC,CAAC;;QAEH;QACAM,MAAM,CAACqB,SAAS,CAAC,CAAC,CAACC,OAAO,CAAEC,KAAK,IAAKA,KAAK,CAACC,IAAI,CAAC,CAAC,CAAC;QACnDpD,cAAc,CAAC,KAAK,CAAC;QACrBE,qBAAqB,CAAC,IAAI,CAAC;MAC7B,CAAC;MAED+B,QAAQ,CAACoB,KAAK,CAAC,CAAC;MAChBrD,cAAc,CAAC,IAAI,CAAC;MACpBE,qBAAqB,CAACe,IAAI,CAACC,GAAG,CAAC,CAAC,CAAC;MACjCd,cAAc,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,OAAOkD,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEF,GAAG,CAAC;IACjD;EACF,CAAC;EAED,MAAMG,aAAa,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA;IAC1B,CAAAA,qBAAA,GAAArD,gBAAgB,CAACK,OAAO,cAAAgD,qBAAA,uBAAxBA,qBAAA,CAA0BN,IAAI,CAAC,CAAC;IAChCpD,cAAc,CAAC,KAAK,CAAC;IACrBE,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,MAAMyD,YAAiF,GAAGA,CAAC;IACzFjB,GAAG;IACHI,QAAQ,GAAG,CAAC;IACZpD;EACF,CAAC,KAAK;IAAAd,EAAA;IACJ,MAAM,CAACgF,SAAS,EAAEC,YAAY,CAAC,GAAGrG,QAAQ,CAAC,KAAK,CAAC;IACjD,MAAMsG,QAAQ,GAAGpG,MAAM,CAAmB,IAAI,CAAC;IAE/C,MAAMqG,UAAU,GAAGA,CAAA,KAAM;MACvB,IAAI,CAACD,QAAQ,CAACpD,OAAO,EAAE;MACvBkD,SAAS,GAAGE,QAAQ,CAACpD,OAAO,CAACsD,KAAK,CAAC,CAAC,GAAGF,QAAQ,CAACpD,OAAO,CAACuD,IAAI,CAAC,CAAC;IAChE,CAAC;IAEDxG,SAAS,CAAC,MAAM;MACd,MAAMuE,KAAK,GAAG8B,QAAQ,CAACpD,OAAO;MAC9B,IAAI,CAACsB,KAAK,EAAE;MACZ,MAAMkC,UAAU,GAAGA,CAAA,KAAML,YAAY,CAAC,KAAK,CAAC;MAC5C7B,KAAK,CAACmC,gBAAgB,CAAC,OAAO,EAAED,UAAU,CAAC;MAC3C,OAAO,MAAMlC,KAAK,CAACoC,mBAAmB,CAAC,OAAO,EAAEF,UAAU,CAAC;IAC7D,CAAC,EAAE,EAAE,CAAC;IAEN,oBACE3F,OAAA;MACE8F,SAAS,EAAE,iEACT3E,MAAM,KAAK,IAAI,GAAG,wCAAwC,GAAG,wBAAwB,EACpF;MAAA4E,QAAA,gBAEH/F,OAAA;QACEgG,OAAO,EAAER,UAAW;QACpBM,SAAS,EAAE,oBACT3E,MAAM,KAAK,IAAI,GAAG,aAAa,GAAG,aAAa,6BACnB;QAAA4E,QAAA,EAE7BV,SAAS,gBAAGrF,OAAA,CAACL,KAAK;UAACsG,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAAGrG,OAAA,CAACN,IAAI;UAACuG,IAAI,EAAE;QAAG;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC/C,CAAC,eACTrG,OAAA;QAAK8F,SAAS,EAAC,QAAQ;QAAAC,QAAA,gBACrB/F,OAAA;UAAK8F,SAAS,EAAC,gDAAgD;UAAAC,QAAA,eAC7D/F,OAAA;YACE8F,SAAS,EAAE,SAAS3E,MAAM,KAAK,IAAI,GAAG,UAAU,GAAG,aAAa,iBAAkB;YAClFmF,KAAK,EAAE;cAAEC,KAAK,EAAElB,SAAS,GAAG,MAAM,GAAG,IAAI;cAAEmB,UAAU,EAAE;YAAkB;UAAE;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5E;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACNrG,OAAA;UAAG8F,SAAS,EAAC,yBAAyB;UAAAC,QAAA,GAAExB,QAAQ,EAAC,GAAC;QAAA;UAAA2B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC,eACNrG,OAAA;QACEyG,GAAG,EAAElB,QAAS;QACdmB,GAAG,EAAEvC,GAAI;QACTwC,MAAM,EAAEA,CAAA,KAAMrB,YAAY,CAAC,IAAI,CAAE;QACjCsB,OAAO,EAAEA,CAAA,KAAMtB,YAAY,CAAC,KAAK;MAAE;QAAAY,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC;EAEV,CAAC;EAAChG,EAAA,CApDI+E,YAAiF;EAsDvF,MAAMyB,aAAa,GAAGtG,KAAK,CAACuG,MAAM,CAAEC,CAAC,IACnClG,SAAS,KAAK,QAAQ,GAAGkG,CAAC,CAACnG,IAAI,KAAK,OAAO,GAAGmG,CAAC,CAACnG,IAAI,KAAK,UAC3D,CAAC;EAED,oBACEZ,OAAA;IAAK8F,SAAS,EAAC,sEAAsE;IAAAC,QAAA,gBAEnF/F,OAAA;MAAQ8F,SAAS,EAAC,wCAAwC;MAAAC,QAAA,eACxD/F,OAAA;QAAI8F,SAAS,EAAC,oBAAoB;QAAAC,QAAA,EAAC;MAAO;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC,EAER,CAACtF,UAAU,gBACVf,OAAA,CAAAE,SAAA;MAAA6F,QAAA,gBAEE/F,OAAA;QAAK8F,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9B/F,OAAA;UACEgG,OAAO,EAAEA,CAAA,KAAMlF,YAAY,CAAC,UAAU,CAAE;UACxCgF,SAAS,EAAE,yFACTjF,SAAS,KAAK,UAAU,GACpB,wBAAwB,GACxB,6CAA6C,EAChD;UAAAkF,QAAA,gBAEH/F,OAAA,CAACF,IAAI;YAACmG,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,mBACpB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTrG,OAAA;UACEgG,OAAO,EAAEA,CAAA,KAAMlF,YAAY,CAAC,QAAQ,CAAE;UACtCgF,SAAS,EAAE,yFACTjF,SAAS,KAAK,QAAQ,GAClB,wBAAwB,GACxB,6CAA6C,EAChD;UAAAkF,QAAA,gBAEH/F,OAAA,CAACH,KAAK;YAACoG,IAAI,EAAE;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBACrB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAGNrG,OAAA;QAAK8F,SAAS,EAAC,sDAAsD;QAAAC,QAAA,EAClEc,aAAa,CAACG,GAAG,CAAEC,IAAI,iBACtBjH,OAAA;UAEEgG,OAAO,EAAEA,CAAA,KAAMhF,aAAa,CAACiG,IAAI,CAAE;UACnCnB,SAAS,EAAC,uGAAuG;UAAAC,QAAA,eAEjH/F,OAAA;YAAK8F,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBACtC/F,OAAA;cACE8F,SAAS,EAAE,wFAAwFmB,IAAI,CAACtG,KAAK,EAAG;cAAAoF,QAAA,EAE/GkB,IAAI,CAACvG;YAAQ;cAAAwF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACX,CAAC,eACNrG,OAAA;cAAA+F,QAAA,gBACE/F,OAAA;gBAAI8F,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EAAEkB,IAAI,CAACxG;cAAI;gBAAAyF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CAAC,eACtDrG,OAAA;gBAAG8F,SAAS,EAAC,uBAAuB;gBAAAC,QAAA,EACjCkB,IAAI,CAACrG,IAAI,KAAK,OAAO,GAAG,YAAY,GAAG;cAAe;gBAAAsF,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtD,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QAAC,GAhBDY,IAAI,CAACzG,EAAE;UAAA0F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAiBT,CACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA,eACN,CAAC,gBAEHrG,OAAA;MAAK8F,SAAS,EAAC,yEAAyE;MAAAC,QAAA,gBAEtF/F,OAAA;QAAK8F,SAAS,EAAC,+EAA+E;QAAAC,QAAA,gBAC5F/F,OAAA;UAAK8F,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtC/F,OAAA;YACEgG,OAAO,EAAEA,CAAA,KAAMhF,aAAa,CAAC,IAAI,CAAE;YACnC8E,SAAS,EAAC,kCAAkC;YAAAC,QAAA,eAE5C/F,OAAA,CAACJ,SAAS;cAACkG,SAAS,EAAC;YAAS;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC,eACTrG,OAAA;YACE8F,SAAS,EAAE,oFAAoF/E,UAAU,CAACJ,KAAK,EAAG;YAAAoF,QAAA,EAEjHhF,UAAU,CAACL;UAAQ;YAAAwF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CAAC,eACNrG,OAAA;YAAA+F,QAAA,gBACE/F,OAAA;cAAI8F,SAAS,EAAC,eAAe;cAAAC,QAAA,EAAEhF,UAAU,CAACN;YAAI;cAAAyF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACpDrG,OAAA;cAAG8F,SAAS,EAAC,uBAAuB;cAAAC,QAAA,EACjChF,UAAU,CAACH,IAAI,KAAK,OAAO,GAAG,YAAY,GAAG;YAAY;cAAAsF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACzD,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNrG,OAAA;UAAK8F,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtC/F,OAAA,CAACX,KAAK;YAACyG,SAAS,EAAC;UAAqE;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACzFrG,OAAA,CAACV,IAAI;YAACwG,SAAS,EAAC;UAAqE;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrF,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNrG,OAAA;QAAK8F,SAAS,EAAC,mDAAmD;QAAAC,QAAA,GAC/D9D,eAAe,CAAC+E,GAAG,CAAEjE,GAAG,iBACvB/C,OAAA;UAEE8F,SAAS,EAAE,iBACT/C,GAAG,CAAC5B,MAAM,KAAK,IAAI,GAAG,WAAW,GAAG,aAAa,EAChD;UAAA4E,QAAA,GAEFhD,GAAG,CAACuB,QAAQ,gBACXtE,OAAA,CAACoF,YAAY;YAACjB,GAAG,EAAEpB,GAAG,CAACuB,QAAS;YAACC,QAAQ,EAAExB,GAAG,CAACwB,QAAS;YAACpD,MAAM,EAAE4B,GAAG,CAAC5B;UAAO;YAAA+E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,gBAE/ErG,OAAA;YACE8F,SAAS,EAAE,iDACT/C,GAAG,CAAC5B,MAAM,KAAK,IAAI,GACf,wCAAwC,GACxC,wBAAwB,EAC3B;YAAA4E,QAAA,EAEFhD,GAAG,CAAC3B;UAAI;YAAA8E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CACN,eACDrG,OAAA;YAAG8F,SAAS,EAAC,4BAA4B;YAAAC,QAAA,EAAEhD,GAAG,CAAC1B;UAAI;YAAA6E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA,GAlBnDtD,GAAG,CAACvC,EAAE;UAAA0F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAmBR,CACN,CAAC,eACFrG,OAAA;UAAKyG,GAAG,EAAEzE;QAAc;UAAAkE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eAGNrG,OAAA;QAAK8F,SAAS,EAAC,wEAAwE;QAAAC,QAAA,GACpFvE,WAAW,iBACVxB,OAAA;UAAK8F,SAAS,EAAC,4FAA4F;UAAAC,QAAA,gBACzG/F,OAAA;YAAK8F,SAAS,EAAC,yBAAyB;YAAAC,QAAA,gBACtC/F,OAAA;cAAK8F,SAAS,EAAC;YAA8C;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAChErG,OAAA;cAAM8F,SAAS,EAAC,oCAAoC;cAAAC,QAAA,GAAC,gBACrC,EAACnE,WAAW,EAAC,IAC7B;YAAA;cAAAsE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACJ,CAAC,eACNrG,OAAA;YACEgG,OAAO,EAAEd,aAAc;YACvBY,SAAS,EAAC,0FAA0F;YAAAC,QAAA,gBAEpG/F,OAAA,CAACP,MAAM;cAACqG,SAAS,EAAC;YAAS;cAAAI,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,SAChC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CACN,EAEA,CAAC7E,WAAW,iBACXxB,OAAA;UACEgG,OAAO,EAAE5C,cAAe;UACxB0C,SAAS,EAAC,wEAAwE;UAClFoB,KAAK,EAAC,cAAc;UAAAnB,QAAA,eAEpB/F,OAAA,CAACT,GAAG;YAACuG,SAAS,EAAC;UAAS;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrB,CACT,eAEDrG,OAAA;UACEmH,KAAK,EAAE7F,UAAW;UAClB8F,QAAQ,EAAGC,CAAC,IAAK9F,aAAa,CAAC8F,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;UAC/CI,WAAW,EAAC,mBAAmB;UAC/BC,QAAQ,EAAEhG,WAAY;UACtBsE,SAAS,EAAE,wIACTtE,WAAW,GAAG,+BAA+B,GAAG,EAAE;QACjD;UAAA0E,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eAEFrG,OAAA;UACEgG,OAAO,EAAEnD,UAAW;UACpB2E,QAAQ,EAAEhG,WAAY;UACtBsE,SAAS,EAAE,iFACTtE,WAAW,GACP,8CAA8C,GAC9C,0CAA0C,EAC7C;UAAAuE,QAAA,gBAEH/F,OAAA,CAACR,IAAI;YAACsG,SAAS,EAAC;UAAS;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,SAC9B;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACjG,GAAA,CApVID,QAAkB;AAAAsH,EAAA,GAAlBtH,QAAkB;AAsVxB,eAAeA,QAAQ;AAAC,IAAAsH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}