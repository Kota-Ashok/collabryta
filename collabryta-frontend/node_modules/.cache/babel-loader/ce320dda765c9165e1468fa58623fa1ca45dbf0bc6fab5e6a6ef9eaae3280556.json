{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from\"react\";import{Search,Users,Paperclip,Send,Check,ArrowLeft,X,Shield,Plus,MessageSquare as MessageIcon}from\"lucide-react\";import{messageService}from\"../../services/messageService\";import{userService}from\"../../services/userService\";import{authService}from\"../../services/authService\";import{motion,AnimatePresence}from\"framer-motion\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateGroupModal=_ref=>{let{isOpen,onClose,users,onCreate}=_ref;const[groupName,setGroupName]=useState(\"\");const[selectedIds,setSelectedIds]=useState([]);const toggleUser=id=>{setSelectedIds(prev=>prev.includes(id)?prev.filter(x=>x!==id):[...prev,id]);};const handleSubmit=()=>{if(!groupName||selectedIds.length===0)return;onCreate(groupName,selectedIds);onClose();setGroupName(\"\");setSelectedIds([]);};return/*#__PURE__*/_jsx(AnimatePresence,{children:isOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 z-[100] flex items-center justify-center p-4\",children:[/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:\"absolute inset-0 bg-slate-900/10 backdrop-blur-sm\",onClick:onClose}),/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,scale:0.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:0.95,y:10},className:\"bg-white rounded-[32px] border border-slate-100 w-full max-w-md p-8 relative z-10 shadow-2xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold tracking-tight text-slate-900\",children:\"Create Group\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-slate-500 font-medium\",children:\"Start a new team conversation\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"w-10 h-10 flex items-center justify-center bg-slate-50 text-slate-400 hover:bg-slate-100 hover:text-slate-900 rounded-xl transition-all\",children:/*#__PURE__*/_jsx(X,{size:20})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-widest px-1\",children:\"Group Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input-field\",value:groupName,onChange:e=>setGroupName(e.target.value),placeholder:\"Enter group name...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-bold text-slate-400 uppercase tracking-widest px-1\",children:\"Select Members\"}),/*#__PURE__*/_jsx(\"div\",{className:\"max-h-[250px] overflow-y-auto space-y-1 pr-2 custom-scrollbar\",children:users.map(u=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>toggleUser(u.id),className:\"w-full flex items-center gap-4 p-3 rounded-2xl transition-all \".concat(selectedIds.includes(u.id)?'bg-blue-50 border border-blue-100':'bg-white border border-transparent hover:bg-slate-50'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl flex items-center justify-center text-xs font-bold transition-all shadow-sm \".concat(selectedIds.includes(u.id)?'bg-blue-600 text-white':'bg-slate-100 text-slate-500'),children:u.name.substring(0,2).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold \".concat(selectedIds.includes(u.id)?'text-blue-600':'text-slate-700'),children:u.name}),selectedIds.includes(u.id)&&/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto p-1 bg-blue-600 rounded-lg text-white\",children:/*#__PURE__*/_jsx(Check,{size:14})})]},u.id))})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmit,disabled:!groupName||selectedIds.length===0,className:\"btn-primary w-full shadow-lg shadow-blue-100 disabled:opacity-50 disabled:shadow-none mt-4\",children:[/*#__PURE__*/_jsx(Plus,{size:18}),\"Create Group\"]})]})]})]})});};const MessagesPage=()=>{var _activeChat$name;const[chats,setChats]=useState([]);const[messages,setMessages]=useState([]);const[currentUser,setCurrentUser]=useState(null);const[activeChatId,setActiveChatId]=useState(null);const[searchQuery,setSearchQuery]=useState(\"\");const[allUsers,setAllUsers]=useState([]);const[inputText,setInputText]=useState(\"\");const[isMobileChatOpen,setIsMobileChatOpen]=useState(false);const[isGroupModalOpen,setIsGroupModalOpen]=useState(false);const messagesContainerRef=useRef(null);const loadChats=useCallback(async()=>{try{const data=await messageService.getChats();setChats(data);}catch(e){console.error(\"Failed to load chats:\",e);}},[]);const loadUserAndData=useCallback(async()=>{try{const user=await authService.getCurrentUser();setCurrentUser(user);await loadChats();const users=await userService.getAllUsers();setAllUsers(users.filter(u=>u.id!==user.id));}catch(e){console.error(\"Failed to load user data:\",e);}},[loadChats]);const loadMessages=useCallback(async chatId=>{try{const msgs=await messageService.getMessages(chatId);setMessages(msgs);await messageService.markAsRead(chatId);loadChats();}catch(e){console.error(\"Failed to load messages:\",e);}},[loadChats]);const scrollToBottom=useCallback(function(){let smooth=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;if(messagesContainerRef.current){const{scrollHeight,clientHeight}=messagesContainerRef.current;messagesContainerRef.current.scrollTo({top:scrollHeight-clientHeight,behavior:smooth?'smooth':'auto'});}},[]);useEffect(()=>{loadUserAndData();},[loadUserAndData]);useEffect(()=>{const pollInterval=setInterval(()=>{loadChats();if(activeChatId){loadMessages(activeChatId);}},10000);return()=>{clearInterval(pollInterval);};},[activeChatId,loadChats,loadMessages]);useEffect(()=>{if(activeChatId){loadMessages(activeChatId);setTimeout(()=>scrollToBottom(false),100);}},[activeChatId,loadMessages,scrollToBottom]);useEffect(()=>{scrollToBottom();},[messages,scrollToBottom]);const handleSendMessage=async()=>{if(!inputText.trim()||!activeChatId)return;try{await messageService.sendMessage(activeChatId,inputText);setInputText(\"\");loadMessages(activeChatId);loadChats();setTimeout(()=>scrollToBottom(),100);}catch(e){console.error(\"Failed to send message:\",e);}};const handleCreateP2PChat=async userId=>{try{const chat=await messageService.createChat([userId],undefined,false);setChats(prev=>prev.find(c=>c.id===chat.id)?prev:[chat,...prev]);setActiveChatId(chat.id);setIsMobileChatOpen(true);setSearchQuery(\"\");}catch(e){console.error(\"Failed to create P2P chat:\",e);}};const handleCreateGroup=async(name,userIds)=>{try{const chat=await messageService.createChat(userIds,name,true);setChats(prev=>[chat,...prev]);setActiveChatId(chat.id);setIsMobileChatOpen(true);}catch(e){console.error(\"Failed to create group chat:\",e);}};const filteredChats=chats.filter(c=>{var _c$name;return(_c$name=c.name)===null||_c$name===void 0?void 0:_c$name.toLowerCase().includes(searchQuery.toLowerCase());});const suggestedUsers=searchQuery?allUsers.filter(u=>u.name.toLowerCase().includes(searchQuery.toLowerCase())):[];const activeChat=chats.find(c=>c.id===activeChatId);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex h-[80vh] bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden mx-4 my-6 animate-fade-in font-sans\",children:[/*#__PURE__*/_jsx(CreateGroupModal,{isOpen:isGroupModalOpen,onClose:()=>setIsGroupModalOpen(false),users:allUsers,onCreate:handleCreateGroup}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full md:w-[320px] lg:w-[380px] bg-white border-r border-slate-100 flex flex-col \".concat(isMobileChatOpen?'hidden md:flex':'flex'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-5 border-b border-slate-50 flex items-center justify-between bg-slate-50/30\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold tracking-tight text-slate-900 leading-none mb-1\",children:\"Messages\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]\"}),\"System Active\"]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsGroupModalOpen(true),className:\"w-9 h-9 flex items-center justify-center bg-white border border-slate-200 text-slate-500 hover:text-blue-600 hover:border-blue-200 rounded-xl transition-all shadow-sm\",title:\"New Group\",children:/*#__PURE__*/_jsx(Plus,{size:18,strokeWidth:2.5})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors\",size:16}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search...\",className:\"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-100 rounded-xl focus:bg-white focus:border-blue-500/20 focus:ring-2 focus:ring-blue-100/50 transition-all outline-none font-semibold text-slate-900 text-sm placeholder:text-slate-400\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value)})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 overflow-y-auto custom-scrollbar px-2 pb-2\",children:[filteredChats.map(chat=>{var _chat$name;return/*#__PURE__*/_jsx(\"div\",{onClick:()=>{setActiveChatId(chat.id);setIsMobileChatOpen(true);},className:\"p-3 mb-1 rounded-2xl cursor-pointer transition-all border \".concat(activeChatId===chat.id?'bg-blue-50 text-slate-900 border-blue-100 shadow-sm':'bg-transparent hover:bg-slate-50 border-transparent hover:border-slate-100 text-slate-600'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-xl flex items-center justify-center text-sm font-bold shrink-0 \".concat(activeChatId===chat.id?'bg-white text-blue-600 border border-blue-100 shadow-sm':'bg-white border border-slate-100 text-slate-500'),children:chat.is_group?/*#__PURE__*/_jsx(Users,{size:16}):(_chat$name=chat.name)===null||_chat$name===void 0?void 0:_chat$name.substring(0,2).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-0.5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-sm font-bold truncate \".concat(activeChatId===chat.id?'text-blue-900':'text-slate-900'),children:chat.name}),chat.last_message_time&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] font-bold \".concat(activeChatId===chat.id?'text-blue-400':'text-slate-400'),children:new Date(chat.last_message_time).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs truncate font-medium \".concat(activeChatId===chat.id?'text-blue-600/80':'text-slate-400'),children:chat.last_message||\"No messages yet\"})]}),(chat.unread_count||0)>0&&/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 text-[9px] font-bold rounded-full flex items-center justify-center shrink-0 \".concat(activeChatId===chat.id?'bg-blue-600 text-white':'bg-blue-600 text-white shadow-sm'),children:chat.unread_count})]})},chat.id);}),suggestedUsers.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-slate-100 mx-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"px-2 mb-2 text-[10px] font-bold text-slate-300 uppercase tracking-widest\",children:\"Suggested\"}),suggestedUsers.map(user=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleCreateP2PChat(user.id),className:\"w-full p-2 rounded-xl hover:bg-slate-50 flex items-center gap-3 group transition-colors\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-500\",children:user.name.substring(0,2).toUpperCase()}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-bold text-slate-700 flex-1 text-left\",children:user.name}),/*#__PURE__*/_jsx(Plus,{size:14,className:\"text-slate-300 group-hover:text-blue-600\"})]},user.id))]})]})]}),activeChat?/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex flex-col relative bg-slate-50/50 \".concat(isMobileChatOpen?'flex absolute inset-0 z-30 bg-white':'hidden md:flex'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"h-16 bg-white border-b border-slate-100 flex items-center justify-between px-6 shrink-0 z-20 shadow-sm relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsMobileChatOpen(false),className:\"md:hidden p-2 -ml-2 text-slate-500\",children:/*#__PURE__*/_jsx(ArrowLeft,{size:20})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-9 h-9 rounded-lg flex items-center justify-center font-bold text-xs shrink-0 bg-slate-900 text-white shadow-md\",children:activeChat.is_group?/*#__PURE__*/_jsx(Users,{size:16}):(_activeChat$name=activeChat.name)===null||_activeChat$name===void 0?void 0:_activeChat$name.substring(0,2).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-sm font-bold text-slate-900 leading-tight\",children:activeChat.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[10px] font-bold text-emerald-500 uppercase tracking-wider flex items-center gap-1\",children:\"Connected\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center gap-2 text-slate-300\",children:/*#__PURE__*/_jsx(Shield,{size:14})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-hidden relative\",children:/*#__PURE__*/_jsx(\"div\",{ref:messagesContainerRef,className:\"absolute inset-0 overflow-y-auto p-6 space-y-4 custom-scrollbar scroll-smooth\",children:/*#__PURE__*/_jsx(AnimatePresence,{mode:\"popLayout\",children:messages.map((msg,idx)=>{var _allUsers$find;const isMe=msg.sender_id===(currentUser===null||currentUser===void 0?void 0:currentUser.id);return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:10,scale:0.95},animate:{opacity:1,y:0,scale:1},className:\"flex \".concat(isMe?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col \".concat(isMe?'items-end':'items-start',\" max-w-[80%]\"),children:[!isMe&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] font-bold text-slate-400 mb-1 ml-1 uppercase tracking-wide\",children:(_allUsers$find=allUsers.find(u=>u.id===msg.sender_id))===null||_allUsers$find===void 0?void 0:_allUsers$find.name.split(' ')[0]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-2.5 rounded-2xl text-sm font-medium leading-relaxed shadow-sm relative \".concat(isMe?'bg-blue-600 text-white rounded-tr-none':'bg-white text-slate-800 border border-slate-200 rounded-tl-none'),children:msg.content}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[9px] font-bold text-slate-300 mt-1 mx-1\",children:new Date(msg.timestamp).toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})})]})},msg.id||idx);})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-white border-t border-slate-100 z-20\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleSendMessage();},className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputText,onChange:e=>setInputText(e.target.value),placeholder:\"Write a message...\",className:\"w-full pl-4 pr-10 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all outline-none text-sm font-medium text-slate-900 placeholder:text-slate-400\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-blue-500 transition-colors\",children:/*#__PURE__*/_jsx(Paperclip,{size:16})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:!inputText.trim(),className:\"w-11 h-11 flex items-center justify-center bg-blue-600 text-white rounded-xl hover:scale-105 active:scale-95 disabled:opacity-50 disabled:scale-100 transition-all shadow-lg shadow-blue-500/20\",children:/*#__PURE__*/_jsx(Send,{size:18})})]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"hidden md:flex flex-1 flex-col items-center justify-center bg-slate-50/50 text-center p-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-white rounded-3xl flex items-center justify-center mb-6 shadow-xl shadow-slate-200 border border-slate-100 rotate-3\",children:/*#__PURE__*/_jsx(MessageIcon,{className:\"text-blue-500\",size:32})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-slate-900 mb-2\",children:\"Select a Conversation\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-slate-400 max-w-xs leading-relaxed uppercase tracking-wide\",children:\"Choose a chat from the sidebar to start collaborating with your team.\"})]})]});};export default MessagesPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","Search","Users","Paperclip","Send","Check","ArrowLeft","X","Shield","Plus","MessageSquare","MessageIcon","messageService","userService","authService","motion","AnimatePresence","jsx","_jsx","jsxs","_jsxs","CreateGroupModal","_ref","isOpen","onClose","users","onCreate","groupName","setGroupName","selectedIds","setSelectedIds","toggleUser","id","prev","includes","filter","x","handleSubmit","length","children","className","div","initial","opacity","animate","exit","onClick","scale","y","size","value","onChange","e","target","placeholder","map","u","concat","name","substring","toUpperCase","disabled","MessagesPage","_activeChat$name","chats","setChats","messages","setMessages","currentUser","setCurrentUser","activeChatId","setActiveChatId","searchQuery","setSearchQuery","allUsers","setAllUsers","inputText","setInputText","isMobileChatOpen","setIsMobileChatOpen","isGroupModalOpen","setIsGroupModalOpen","messagesContainerRef","loadChats","data","getChats","console","error","loadUserAndData","user","getCurrentUser","getAllUsers","loadMessages","chatId","msgs","getMessages","markAsRead","scrollToBottom","smooth","arguments","undefined","current","scrollHeight","clientHeight","scrollTo","top","behavior","pollInterval","setInterval","clearInterval","setTimeout","handleSendMessage","trim","sendMessage","handleCreateP2PChat","userId","chat","createChat","find","c","handleCreateGroup","userIds","filteredChats","_c$name","toLowerCase","suggestedUsers","activeChat","title","strokeWidth","type","_chat$name","is_group","last_message_time","Date","toLocaleTimeString","hour","minute","last_message","unread_count","ref","mode","msg","idx","_allUsers$find","isMe","sender_id","split","content","timestamp","onSubmit","preventDefault"],"sources":["D:/Collabryta/collabryta-frontend/src/pages/Messages/MessagesPage.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport {\r\n    Search, Users, Paperclip, Smile, Send,\r\n    Check, ArrowLeft, X, Sparkles, Zap, Shield, Plus, ArrowUpRight, ChevronRight, MessageSquare as MessageIcon\r\n} from \"lucide-react\";\r\nimport { messageService, Chat, Message } from \"../../services/messageService\";\r\nimport { userService, User } from \"../../services/userService\";\r\nimport { authService } from \"../../services/authService\";\r\n\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\n\r\nconst CreateGroupModal = ({ isOpen, onClose, users, onCreate }: any) => {\r\n    const [groupName, setGroupName] = useState(\"\");\r\n    const [selectedIds, setSelectedIds] = useState<number[]>([]);\r\n\r\n    const toggleUser = (id: number) => {\r\n        setSelectedIds(prev => prev.includes(id) ? prev.filter(x => x !== id) : [...prev, id]);\r\n    };\r\n\r\n    const handleSubmit = () => {\r\n        if (!groupName || selectedIds.length === 0) return;\r\n        onCreate(groupName, selectedIds);\r\n        onClose();\r\n        setGroupName(\"\");\r\n        setSelectedIds([]);\r\n    };\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4\">\r\n                    <motion.div\r\n                        initial={{ opacity: 0 }}\r\n                        animate={{ opacity: 1 }}\r\n                        exit={{ opacity: 0 }}\r\n                        className=\"absolute inset-0 bg-slate-900/10 backdrop-blur-sm\"\r\n                        onClick={onClose}\r\n                    />\r\n                    <motion.div\r\n                        initial={{ opacity: 0, scale: 0.95, y: 10 }}\r\n                        animate={{ opacity: 1, scale: 1, y: 0 }}\r\n                        exit={{ opacity: 0, scale: 0.95, y: 10 }}\r\n                        className=\"bg-white rounded-[32px] border border-slate-100 w-full max-w-md p-8 relative z-10 shadow-2xl\"\r\n                    >\r\n                        <div className=\"flex justify-between items-center mb-8\">\r\n                            <div>\r\n                                <h3 className=\"text-2xl font-bold tracking-tight text-slate-900\">Create Group</h3>\r\n                                <p className=\"text-sm text-slate-500 font-medium\">Start a new team conversation</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={onClose}\r\n                                className=\"w-10 h-10 flex items-center justify-center bg-slate-50 text-slate-400 hover:bg-slate-100 hover:text-slate-900 rounded-xl transition-all\"\r\n                            >\r\n                                <X size={20} />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold text-slate-400 uppercase tracking-widest px-1\">Group Name</label>\r\n                                <input\r\n                                    className=\"input-field\"\r\n                                    value={groupName}\r\n                                    onChange={e => setGroupName(e.target.value)}\r\n                                    placeholder=\"Enter group name...\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold text-slate-400 uppercase tracking-widest px-1\">Select Members</label>\r\n                                <div className=\"max-h-[250px] overflow-y-auto space-y-1 pr-2 custom-scrollbar\">\r\n                                    {users.map((u: User) => (\r\n                                        <button\r\n                                            key={u.id}\r\n                                            onClick={() => toggleUser(u.id)}\r\n                                            className={`w-full flex items-center gap-4 p-3 rounded-2xl transition-all ${selectedIds.includes(u.id) ? 'bg-blue-50 border border-blue-100' : 'bg-white border border-transparent hover:bg-slate-50'\r\n                                                }`}\r\n                                        >\r\n                                            <div className={`w-10 h-10 rounded-xl flex items-center justify-center text-xs font-bold transition-all shadow-sm ${selectedIds.includes(u.id) ? 'bg-blue-600 text-white' : 'bg-slate-100 text-slate-500'\r\n                                                }`}>\r\n                                                {u.name.substring(0, 2).toUpperCase()}\r\n                                            </div>\r\n                                            <span className={`text-sm font-semibold ${selectedIds.includes(u.id) ? 'text-blue-600' : 'text-slate-700'}`}>{u.name}</span>\r\n                                            {selectedIds.includes(u.id) && (\r\n                                                <div className=\"ml-auto p-1 bg-blue-600 rounded-lg text-white\">\r\n                                                    <Check size={14} />\r\n                                                </div>\r\n                                            )}\r\n                                        </button>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button\r\n                                onClick={handleSubmit}\r\n                                disabled={!groupName || selectedIds.length === 0}\r\n                                className=\"btn-primary w-full shadow-lg shadow-blue-100 disabled:opacity-50 disabled:shadow-none mt-4\"\r\n                            >\r\n                                <Plus size={18} />\r\n                                Create Group\r\n                            </button>\r\n                        </div>\r\n                    </motion.div>\r\n                </div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n};\r\n\r\nconst MessagesPage: React.FC = () => {\r\n    const [chats, setChats] = useState<Chat[]>([]);\r\n    const [messages, setMessages] = useState<Message[]>([]);\r\n    const [currentUser, setCurrentUser] = useState<any>(null);\r\n    const [activeChatId, setActiveChatId] = useState<number | null>(null);\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [allUsers, setAllUsers] = useState<User[]>([]);\r\n    const [inputText, setInputText] = useState(\"\");\r\n    const [isMobileChatOpen, setIsMobileChatOpen] = useState(false);\r\n    const [isGroupModalOpen, setIsGroupModalOpen] = useState(false);\r\n\r\n    const messagesContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const loadChats = useCallback(async () => {\r\n        try {\r\n            const data = await messageService.getChats();\r\n            setChats(data);\r\n        } catch (e) {\r\n            console.error(\"Failed to load chats:\", e);\r\n        }\r\n    }, []);\r\n\r\n    const loadUserAndData = useCallback(async () => {\r\n        try {\r\n            const user = await authService.getCurrentUser();\r\n            setCurrentUser(user);\r\n            await loadChats();\r\n            const users = await userService.getAllUsers();\r\n            setAllUsers(users.filter(u => u.id !== user.id));\r\n        } catch (e) {\r\n            console.error(\"Failed to load user data:\", e);\r\n        }\r\n    }, [loadChats]);\r\n\r\n    const loadMessages = useCallback(async (chatId: number) => {\r\n        try {\r\n            const msgs = await messageService.getMessages(chatId);\r\n            setMessages(msgs);\r\n            await messageService.markAsRead(chatId);\r\n            loadChats();\r\n        } catch (e) {\r\n            console.error(\"Failed to load messages:\", e);\r\n        }\r\n    }, [loadChats]);\r\n\r\n    const scrollToBottom = useCallback((smooth = true) => {\r\n        if (messagesContainerRef.current) {\r\n            const { scrollHeight, clientHeight } = messagesContainerRef.current;\r\n            messagesContainerRef.current.scrollTo({\r\n                top: scrollHeight - clientHeight,\r\n                behavior: smooth ? 'smooth' : 'auto'\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        loadUserAndData();\r\n    }, [loadUserAndData]);\r\n\r\n    useEffect(() => {\r\n        const pollInterval = setInterval(() => {\r\n            loadChats();\r\n            if (activeChatId) {\r\n                loadMessages(activeChatId);\r\n            }\r\n        }, 10000);\r\n\r\n        return () => {\r\n            clearInterval(pollInterval);\r\n        };\r\n    }, [activeChatId, loadChats, loadMessages]);\r\n\r\n    useEffect(() => {\r\n        if (activeChatId) {\r\n            loadMessages(activeChatId);\r\n            setTimeout(() => scrollToBottom(false), 100);\r\n        }\r\n    }, [activeChatId, loadMessages, scrollToBottom]);\r\n\r\n    useEffect(() => {\r\n        scrollToBottom();\r\n    }, [messages, scrollToBottom]);\r\n\r\n    const handleSendMessage = async () => {\r\n        if (!inputText.trim() || !activeChatId) return;\r\n        try {\r\n            await messageService.sendMessage(activeChatId, inputText);\r\n            setInputText(\"\");\r\n            loadMessages(activeChatId);\r\n            loadChats();\r\n            setTimeout(() => scrollToBottom(), 100);\r\n        } catch (e) {\r\n            console.error(\"Failed to send message:\", e);\r\n        }\r\n    };\r\n\r\n    const handleCreateP2PChat = async (userId: number) => {\r\n        try {\r\n            const chat = await messageService.createChat([userId], undefined, false);\r\n            setChats(prev => prev.find(c => c.id === chat.id) ? prev : [chat, ...prev]);\r\n            setActiveChatId(chat.id);\r\n            setIsMobileChatOpen(true);\r\n            setSearchQuery(\"\");\r\n        } catch (e) {\r\n            console.error(\"Failed to create P2P chat:\", e);\r\n        }\r\n    };\r\n\r\n    const handleCreateGroup = async (name: string, userIds: number[]) => {\r\n        try {\r\n            const chat = await messageService.createChat(userIds, name, true);\r\n            setChats(prev => [chat, ...prev]);\r\n            setActiveChatId(chat.id);\r\n            setIsMobileChatOpen(true);\r\n        } catch (e) {\r\n            console.error(\"Failed to create group chat:\", e);\r\n        }\r\n    };\r\n\r\n    const filteredChats = chats.filter(c => c.name?.toLowerCase().includes(searchQuery.toLowerCase()));\r\n    const suggestedUsers = searchQuery ? allUsers.filter(u => u.name.toLowerCase().includes(searchQuery.toLowerCase())) : [];\r\n    const activeChat = chats.find(c => c.id === activeChatId);\r\n\r\n    return (\r\n        <div className=\"flex h-[80vh] bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden mx-4 my-6 animate-fade-in font-sans\">\r\n            <CreateGroupModal\r\n                isOpen={isGroupModalOpen}\r\n                onClose={() => setIsGroupModalOpen(false)}\r\n                users={allUsers}\r\n                onCreate={handleCreateGroup}\r\n            />\r\n\r\n            {/* Sidebar (Chat List) */}\r\n            <div className={`w-full md:w-[320px] lg:w-[380px] bg-white border-r border-slate-100 flex flex-col ${isMobileChatOpen ? 'hidden md:flex' : 'flex'}`}>\r\n                <div className=\"p-5 border-b border-slate-50 flex items-center justify-between bg-slate-50/30\">\r\n                    <div>\r\n                        <h1 className=\"text-xl font-bold tracking-tight text-slate-900 leading-none mb-1\">Messages</h1>\r\n                        <p className=\"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5\">\r\n                            <span className=\"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]\" />\r\n                            System Active\r\n                        </p>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => setIsGroupModalOpen(true)}\r\n                        className=\"w-9 h-9 flex items-center justify-center bg-white border border-slate-200 text-slate-500 hover:text-blue-600 hover:border-blue-200 rounded-xl transition-all shadow-sm\"\r\n                        title=\"New Group\"\r\n                    >\r\n                        <Plus size={18} strokeWidth={2.5} />\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"px-4 py-3\">\r\n                    <div className=\"relative group\">\r\n                        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-blue-500 transition-colors\" size={16} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search...\"\r\n                            className=\"w-full pl-9 pr-4 py-2 bg-slate-50 border border-slate-100 rounded-xl focus:bg-white focus:border-blue-500/20 focus:ring-2 focus:ring-blue-100/50 transition-all outline-none font-semibold text-slate-900 text-sm placeholder:text-slate-400\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar px-2 pb-2\">\r\n                    {filteredChats.map(chat => (\r\n                        <div\r\n                            key={chat.id}\r\n                            onClick={() => {\r\n                                setActiveChatId(chat.id);\r\n                                setIsMobileChatOpen(true);\r\n                            }}\r\n                            className={`p-3 mb-1 rounded-2xl cursor-pointer transition-all border ${activeChatId === chat.id\r\n                                ? 'bg-blue-50 text-slate-900 border-blue-100 shadow-sm'\r\n                                : 'bg-transparent hover:bg-slate-50 border-transparent hover:border-slate-100 text-slate-600'\r\n                                }`}\r\n                        >\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className={`w-10 h-10 rounded-xl flex items-center justify-center text-sm font-bold shrink-0 ${activeChatId === chat.id\r\n                                    ? 'bg-white text-blue-600 border border-blue-100 shadow-sm'\r\n                                    : 'bg-white border border-slate-100 text-slate-500'\r\n                                    }`}>\r\n                                    {chat.is_group ? <Users size={16} /> : chat.name?.substring(0, 2).toUpperCase()}\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <div className=\"flex justify-between items-center mb-0.5\">\r\n                                        <h3 className={`text-sm font-bold truncate ${activeChatId === chat.id ? 'text-blue-900' : 'text-slate-900'}`}>\r\n                                            {chat.name}\r\n                                        </h3>\r\n                                        {chat.last_message_time && (\r\n                                            <span className={`text-[10px] font-bold ${activeChatId === chat.id ? 'text-blue-400' : 'text-slate-400'}`}>\r\n                                                {new Date(chat.last_message_time).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                    <p className={`text-xs truncate font-medium ${activeChatId === chat.id ? 'text-blue-600/80' : 'text-slate-400'}`}>\r\n                                        {chat.last_message || \"No messages yet\"}\r\n                                    </p>\r\n                                </div>\r\n                                {(chat.unread_count || 0) > 0 && (\r\n                                    <div className={`w-4 h-4 text-[9px] font-bold rounded-full flex items-center justify-center shrink-0 ${activeChatId === chat.id\r\n                                        ? 'bg-blue-600 text-white'\r\n                                        : 'bg-blue-600 text-white shadow-sm'\r\n                                        }`}>\r\n                                        {chat.unread_count}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n\r\n                    {/* Suggestions Section styling updated for compactness */}\r\n                    {suggestedUsers.length > 0 && (\r\n                        <div className=\"mt-4 pt-4 border-t border-slate-100 mx-2\">\r\n                            <h4 className=\"px-2 mb-2 text-[10px] font-bold text-slate-300 uppercase tracking-widest\">Suggested</h4>\r\n                            {suggestedUsers.map(user => (\r\n                                <button key={user.id} onClick={() => handleCreateP2PChat(user.id)} className=\"w-full p-2 rounded-xl hover:bg-slate-50 flex items-center gap-3 group transition-colors\">\r\n                                    <div className=\"w-8 h-8 rounded-lg bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-500\">{user.name.substring(0, 2).toUpperCase()}</div>\r\n                                    <span className=\"text-xs font-bold text-slate-700 flex-1 text-left\">{user.name}</span>\r\n                                    <Plus size={14} className=\"text-slate-300 group-hover:text-blue-600\" />\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Chat Area */}\r\n            {activeChat ? (\r\n                <div className={`flex-1 flex flex-col relative bg-slate-50/50 ${isMobileChatOpen ? 'flex absolute inset-0 z-30 bg-white' : 'hidden md:flex'}`}>\r\n\r\n                    {/* Chat Header */}\r\n                    <div className=\"h-16 bg-white border-b border-slate-100 flex items-center justify-between px-6 shrink-0 z-20 shadow-sm relative\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <button onClick={() => setIsMobileChatOpen(false)} className=\"md:hidden p-2 -ml-2 text-slate-500\">\r\n                                <ArrowLeft size={20} />\r\n                            </button>\r\n                            <div className=\"w-9 h-9 rounded-lg flex items-center justify-center font-bold text-xs shrink-0 bg-slate-900 text-white shadow-md\">\r\n                                {activeChat.is_group ? <Users size={16} /> : activeChat.name?.substring(0, 2).toUpperCase()}\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"text-sm font-bold text-slate-900 leading-tight\">{activeChat.name}</h2>\r\n                                <p className=\"text-[10px] font-bold text-emerald-500 uppercase tracking-wider flex items-center gap-1\">\r\n                                    Connected\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2 text-slate-300\">\r\n                            <Shield size={14} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chat Messages */}\r\n                    <div className=\"flex-1 overflow-hidden relative\">\r\n                        {/* Messages List */}\r\n                        <div ref={messagesContainerRef} className=\"absolute inset-0 overflow-y-auto p-6 space-y-4 custom-scrollbar scroll-smooth\">\r\n                            <AnimatePresence mode=\"popLayout\">\r\n                                {messages.map((msg, idx) => {\r\n                                    const isMe = msg.sender_id === currentUser?.id;\r\n                                    return (\r\n                                        <motion.div\r\n                                            key={msg.id || idx}\r\n                                            initial={{ opacity: 0, y: 10, scale: 0.95 }}\r\n                                            animate={{ opacity: 1, y: 0, scale: 1 }}\r\n                                            className={`flex ${isMe ? 'justify-end' : 'justify-start'}`}\r\n                                        >\r\n                                            <div className={`flex flex-col ${isMe ? 'items-end' : 'items-start'} max-w-[80%]`}>\r\n                                                {!isMe && (\r\n                                                    <span className=\"text-[10px] font-bold text-slate-400 mb-1 ml-1 uppercase tracking-wide\">\r\n                                                        {allUsers.find(u => u.id === msg.sender_id)?.name.split(' ')[0]}\r\n                                                    </span>\r\n                                                )}\r\n                                                <div className={`px-4 py-2.5 rounded-2xl text-sm font-medium leading-relaxed shadow-sm relative ${isMe\r\n                                                    ? 'bg-blue-600 text-white rounded-tr-none'\r\n                                                    : 'bg-white text-slate-800 border border-slate-200 rounded-tl-none'\r\n                                                    }`}>\r\n                                                    {msg.content}\r\n                                                </div>\r\n                                                <span className=\"text-[9px] font-bold text-slate-300 mt-1 mx-1\">\r\n                                                    {new Date(msg.timestamp).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                                </span>\r\n                                            </div>\r\n                                        </motion.div>\r\n                                    );\r\n                                })}\r\n                            </AnimatePresence>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Chat Input */}\r\n                    <div className=\"p-4 bg-white border-t border-slate-100 z-20\">\r\n                        <form\r\n                            onSubmit={(e) => { e.preventDefault(); handleSendMessage(); }}\r\n                            className=\"flex items-center gap-3\"\r\n                        >\r\n                            <div className=\"flex-1 relative\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={inputText}\r\n                                    onChange={(e) => setInputText(e.target.value)}\r\n                                    placeholder=\"Write a message...\"\r\n                                    className=\"w-full pl-4 pr-10 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 transition-all outline-none text-sm font-medium text-slate-900 placeholder:text-slate-400\"\r\n                                />\r\n                                <button type=\"button\" className=\"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-blue-500 transition-colors\">\r\n                                    <Paperclip size={16} />\r\n                                </button>\r\n                            </div>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={!inputText.trim()}\r\n                                className=\"w-11 h-11 flex items-center justify-center bg-blue-600 text-white rounded-xl hover:scale-105 active:scale-95 disabled:opacity-50 disabled:scale-100 transition-all shadow-lg shadow-blue-500/20\"\r\n                            >\r\n                                <Send size={18} />\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"hidden md:flex flex-1 flex-col items-center justify-center bg-slate-50/50 text-center p-12\">\r\n                    <div className=\"w-20 h-20 bg-white rounded-3xl flex items-center justify-center mb-6 shadow-xl shadow-slate-200 border border-slate-100 rotate-3\">\r\n                        <MessageIcon className=\"text-blue-500\" size={32} />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-bold text-slate-900 mb-2\">Select a Conversation</h3>\r\n                    <p className=\"text-xs font-medium text-slate-400 max-w-xs leading-relaxed uppercase tracking-wide\">\r\n                        Choose a chat from the sidebar to start collaborating with your team.\r\n                    </p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MessagesPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}